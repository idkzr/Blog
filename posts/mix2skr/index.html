<!DOCTYPE html><html lang="zh-Hans"><head>
<meta charset="utf-8">
<title>小米MIX 2S System分区扩容 - 无名小筑</title>
<base href="/">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
<link rel="canonical" href="https://blog.zr.ci/posts/mix2skr/">
<link rel="icon" type="image/x-icon" href="/favicon.ico">
<link rel="manifest" href="/manifest.json">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="description" content="前言： 由于MIX 2s的System分区过小，导致部分gsi无法刷入，故扩容分区，顺便制作为卡刷包方便使用。">
<meta property="og:type" content="website">
<meta property="og:title" content="小米MIX 2S System分区扩容">
<meta property="og:url" content="https://blog.zr.ci/posts/mix2skr/index.html">
<meta property="og:site_name" content="无名小筑">
<meta property="og:description" content="前言： 由于MIX 2s的System分区过小，导致部分gsi无法刷入，故扩容分区，顺便制作为卡刷包方便使用。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/idkzr/static@master/imgs/mix2skr/cover.png">
<meta property="article:published_time" content="2020-08-09T14:11:00.000Z">
<meta property="article:modified_time" content="2020-08-15T14:11:00.000Z">
<meta property="article:author" content="箴扰">
<meta property="article:tag" content="Android">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/idkzr/static@master/imgs/mix2skr/cover.png">
<script type="application/ld+json">[{"@context":"http://schema.org","@type":"WebSite","publisher":{"@type":"Person","name":"箴扰","description":"分别便是为了重逢","image":"https://www.gravatar.com/avatar/6a610305a94f20a4f2212eb510dc98b9?s=160"},"url":"https://blog.zr.ci","image":"https://www.gravatar.com/avatar/6a610305a94f20a4f2212eb510dc98b9?s=160","description":"无名小筑，一个简简单单的博客，拿来记录一下生活，博主日常咕咕咕。","author":{"@type":"Person","name":"箴扰","description":"分别便是为了重逢","image":"https://www.gravatar.com/avatar/6a610305a94f20a4f2212eb510dc98b9?s=160"},"inLanguage":{"@type":"Language","alternateName":"zh-Hans"}},{"@context":"http://schema.org","@type":"Article","articleSection":"瞎折腾","url":"https://blog.zr.ci/posts/mix2skr.html","headline":"小米MIX 2S System分区扩容","image":"https://cdn.jsdelivr.net/gh/idkzr/static@master/imgs/mix2skr/cover.png","datePublished":"2020-08-09T14:11:00.000Z","dateModified":"2020-08-15T14:11:00.000Z","keywords":"Android","description":"前言：\n由于MIX 2s的System分区过小，导致部分gsi无法刷入，故扩容分区，顺便制作为卡刷包方便使用。","publisher":{"@type":"Organization","name":"无名小筑","logo":{"@type":"ImageObject","url":"https://www.gravatar.com/avatar/6a610305a94f20a4f2212eb510dc98b9?s=160"}},"author":{"@type":"Person","name":"箴扰","description":"分别便是为了重逢","image":"https://www.gravatar.com/avatar/6a610305a94f20a4f2212eb510dc98b9?s=160"},"inLanguage":{"@type":"Language","alternateName":"zh-Hans"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.zr.ci/posts/mix2skr.html"},"thumbnailUrl":"https://cdn.jsdelivr.net/gh/idkzr/static@master/imgs/mix2skr/cover.png"}]</script><link rel="alternate" type="application/atom+xml" title="无名小筑" href="/atom.xml">
<link href="//fonts.googleapis.com/css?family=Baloo+Bhaijaan|Inconsolata|Josefin+Sans|Montserrat" rel="stylesheet"><link href="/styles.43478ea7e28ed563c48b.css" rel="stylesheet">
<link rel="stylesheet" href="/theme.28760e21272c7fb12812.css" is="theme">

<script src="/config.cbc92a5068011152d161.js"></script>

<meta name="generator" content="Hexo 5.2.0"><meta name="theme-color" content="#111"><script type="application/json" is="state">{&q;api/cG9zdHMvbWl4MnNrcg.json&q;:{&q;title&q;:&q;小米MIX 2S System分区扩容&q;,&q;date&q;:&q;2020-08-09T14:11:00.000Z&q;,&q;date_formatted&q;:{&q;ll&q;:&q;2020年8月9日&q;,&q;L&q;:&q;2020/08/09&q;,&q;MM-DD&q;:&q;08-09&q;},&q;thumbnail&q;:&q;https://cdn.jsdelivr.net/gh/idkzr/static@master/imgs/mix2skr/cover.png&q;,&q;color&q;:&q;#111&q;,&q;link&q;:&q;posts/mix2skr&q;,&q;comments&q;:true,&q;tags&q;:[&q;Android&q;],&q;categories&q;:[&q;瞎折腾&q;],&q;updated&q;:&q;2020-08-15T14:11:00.000Z&q;,&q;content&q;:&q;&l;h2 id=\&q;前言：\&q;&g;前言：&l;a title=\&q;#前言：\&q; href=\&q;#前言：\&q;&g;&l;/a&g;&l;/h2&g;\n&l;p&g;由于MIX 2s的System分区过小，导致部分gsi无法刷入，故扩容分区，顺便制作为卡刷包方便使用。&l;/p&g;\n&l;a id=\&q;more\&q;&g;&l;/a&g;\n&l;h2 id=\&q;设备要求：\&q;&g;设备要求：&l;a title=\&q;#设备要求：\&q; href=\&q;#设备要求：\&q;&g;&l;/a&g;&l;/h2&g;\n&l;p&g;i：确保您的设备为小米MIX 2s&l;br&g;\nii：设备已解除BL锁并拥有第三方Recovery&l;/p&g;\n&l;h2 id=\&q;有损扩容\&q;&g;有损扩容&l;a title=\&q;#有损扩容\&q; href=\&q;#有损扩容\&q;&g;&l;/a&g;&l;/h2&g;\n&l;h3 id=\&q;使用方法：\&q;&g;使用方法：&l;a title=\&q;#使用方法：\&q; href=\&q;#使用方法：\&q;&g;&l;/a&g;&l;/h3&g;\n&l;p&g;i：下载本人提供的 MIX2s_5GB_System.zip 文件&l;br&g;\nii：重启至Recovery&l;br&g;\niii：找到 MIX2s_5GB_System.zip 并刷入&l;br&g;\niv:重启至Recovery，格式化： System,Vendor,Data&l;/p&g;\n&l;p&g;注意：由于会清除 System,Vendor,Data 三个分区的数据，请提前备份您的所有重要数据，如果您的身边没有电脑或其它存储设备，请下载 los 的ROM并复制到 /cust 目录一份，方便刷入。&l;/p&g;\n&l;h3 id=\&q;原理：\&q;&g;原理：&l;a title=\&q;#原理：\&q; href=\&q;#原理：\&q;&g;&l;/a&g;&l;/h3&g;\n&l;p&g;使用sgdisk对磁盘进行重新分区&l;/p&g;\n&l;h3 id=\&q;常见问题：\&q;&g;常见问题：&l;a title=\&q;#常见问题：\&q; href=\&q;#常见问题：\&q;&g;&l;/a&g;&l;/h3&g;\n&l;p&g;Q:扩容之后可以还原吗？&l;br&g;\nA:可以，刷一次3GB的文件即可还原。另：如果已经扩容分区，之后想更换其它的大小的分区，请务必先还原。&l;br&g;\nQ:扩容之后可以刷官方ROM吗？&l;br&g;\nA:可以，但是需要注意官方有dm校验，不去除会卡第一屏，可以通过同时刷入magisk去除。&l;br&g;\nQ:扩容之后可以线刷吗？&l;br&g;\nA:可以，但不推荐这样做，如果需要线刷，请勿勾选锁定选项，否则可能会导致需要售后解决。&l;br&g;\nQ:为什么我扩容之后刷入ROM却显示System大小为3GB&l;br&g;\nA:这是因为ROM打包时是按照3GB大小打包的，请前往Recovery，点击：分区管理 - System - 调整分区大小。Vendor分区同理。&l;/p&g;\n&l;h2 id=\&q;无损扩容\&q;&g;无损扩容&l;a title=\&q;#无损扩容\&q; href=\&q;#无损扩容\&q;&g;&l;/a&g;&l;/h2&g;\n&l;p&g;此方法极度危险，并且不推荐使用，如果您没有相关经验，请谨慎。&l;br&g;\n手机重启至第三方Recovery连接电脑，下载我提供的无损扩容文件&l;br&g;\n解压并进入目录,按 Shift+右键 选择打开Powershell&l;br&g;\n输入以下命令（此处为win10）：&l;/p&g;\n&l;figure class=\&q;highlight shell\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;3&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;4&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;5&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;6&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;7&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;8&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;9&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;10&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;11&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;12&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;13&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;14&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;15&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;16&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;17&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;18&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;./adb push sgdisk /sbin&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;./adb shell&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;comod 0777 /sbin/sgdisk&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;sgdisk --delete=18 /dev/block/sda&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;sgdisk --delete=19 /dev/block/sda&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;sgdisk --delete=20 /dev/block/sda&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;sgdisk --delete=47 /dev/block/sde&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;sgdisk --delete=48 /dev/block/sde&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;sgdisk --new 0:0:+1024M --change-name=18:vendor --typecode=18:97D7B011-54DA-4835-B3C4-917AD6E73D74 /dev/block/sda&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;sgdisk --new 0:0:+64M --change-name=19:recovery --typecode=19:9D72D4E4-9958-42DA-AC26-BEA7A90B0434 /dev/block/sda&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;sgdisk --new 0:0:0 --change-name=20:cache --typecode=20:5594C694-C871-4B5F-90B1-690A6F68E0F7 /dev/block/sda&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;sgdisk --new 0:0:+512M --change-name=47:cust --typecode=47:C3008246-512A-4FEB-8A51-068FA4AD5F6D /dev/block/sde&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;sgdisk --new 0:0:0 --change-name=48:system --typecode=48:97D7B011-54DA-4835-B3C4-917AD6E73D74 /dev/block/sde&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;reboot bootloader&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;此时手机将重启至fastboot，保持设备连接，在Powershell中输入：&l;/p&g;\n&l;figure class=\&q;highlight shell\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;./fastboot flash recovery recovery.img&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;./fastboot boot recovery.img&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;不出意外，您的手机将重启至Recovery ，请保持设备连接。&l;br&g;\n在Powershell中输入：&l;/p&g;\n&l;figure class=\&q;highlight shell\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;3&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;4&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;5&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;6&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;7&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;8&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;9&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;10&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;./adb shell&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;mke2fs -t ext4 -b 4096 /dev/block/sde47&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;mke2fs -t ext4 -b 4096 /dev/block/sda18&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;e2fsdroid -e -S /file_contexts -a /vendor /dev/block/sda18&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;mke2fs -t ext4 -b 4096 /dev/block/sda20&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;e2fsdroid -e -S /file_contexts -a /cache /dev/block/sda20&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;mke2fs -t ext4 -b 4096 /dev/block/sde48&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;e2fsdroid -e -S /file_contexts -a / /dev/block/sde48&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;reboot recovery&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;并在Recovery中格式化： System,Vendor,Data,Cache&l;br&g;\n至此，扩容完成。&l;/p&g;\n&l;p&g;下方是本人执行扩容时的回显内容，可以参考。&l;/p&g;\n&l;figure class=\&q;highlight shell\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;3&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;4&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;5&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;6&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;7&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;8&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;9&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;10&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;11&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;12&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;13&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;14&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;15&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;16&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;17&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;18&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;19&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;20&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;21&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;22&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;23&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;24&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;25&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;26&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;27&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;28&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;29&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;30&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;31&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;32&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;33&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;34&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;35&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;36&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;37&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;38&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;39&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;40&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;41&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;42&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;43&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;44&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;45&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;46&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;47&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;48&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;49&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;50&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;51&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;52&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;53&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;54&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;55&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;56&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;57&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;58&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;59&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;60&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;61&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;62&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;63&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;64&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;65&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;66&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;67&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;68&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;69&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;70&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;71&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;72&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;73&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;74&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;75&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;76&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;77&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;78&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;79&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;80&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;81&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;82&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;83&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;84&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;85&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;86&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;87&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;88&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;89&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;90&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;91&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;92&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;93&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;94&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;95&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;96&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;97&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;98&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;99&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;100&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;101&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;102&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;103&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;104&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;105&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;106&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;107&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;108&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;109&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;110&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;111&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;112&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;PS C:\\platform-tools&a;gt; ./adb push sgdisk /sbin&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;PS C:\\platform-tools&a;gt; ./adb shell&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;sh-5.0# chmod 0777 /sbin/sgdisk&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;sh-5.0# sgdisk --delete=18 /dev/block/sda&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;Warning: The kernel is still using the old partition table.&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;The new table will be used at the next reboot.&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;The operation has completed successfully.&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;sh-5.0# sgdisk --delete=19 /dev/block/sda&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;Warning: The kernel is still using the old partition table.&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;The new table will be used at the next reboot.&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;The operation has completed successfully.&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;sh-5.0# sgdisk --delete=20 /dev/block/sda&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;Warning: The kernel is still using the old partition table.&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;The new table will be used at the next reboot.&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;The operation has completed successfully.&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;sh-5.0# sgdisk --delete=47 /dev/block/sde&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;The operation has completed successfully.&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;sh-5.0# sgdisk --delete=48 /dev/block/sde&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;The operation has completed successfully.&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;sh-5.0# sgdisk --new 0:0:+1024M --change-name=18:vendor --typecode=18:97D7B011-54DA-4835-B3C4-917AD6E73D74 /dev/block/&a;gt;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;Setting name!&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;partNum is 17&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;REALLY setting name!&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;Warning: The kernel is still using the old partition table.&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;The new table will be used at the next reboot.&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;The operation has completed successfully.&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;sh-5.0# sgdisk --new 0:0:+64M --change-name=19:recovery --typecode=19:9D72D4E4-9958-42DA-AC26-BEA7A90B0434 /dev/block/&a;gt;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;Setting name!&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;partNum is 18&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;REALLY setting name!&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;Warning: The kernel is still using the old partition table.&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;The new table will be used at the next reboot.&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;The operation has completed successfully.&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;sh-5.0# sgdisk --new 0:0:+0 --change-name=20:cache --typecode=20:5594C694-C871-4B5F-90B1-690A6F68E0F7 /dev/block/sda&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;Setting name!&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;partNum is 19&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;REALLY setting name!&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;Warning: The kernel is still using the old partition table.&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;The new table will be used at the next reboot.&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;The operation has completed successfully.&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;sh-5.0# sgdisk --new 0:0:+512M --change-name=47:cust --typecode=47:C3008246-512A-4FEB-8A51-068FA4AD5F6D /dev/block/sde&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;Setting name!&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;partNum is 46&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;REALLY setting name!&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;The operation has completed successfully.&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;sh-5.0# sgdisk --new 0:0:0 --change-name=48:system --typecode=48:97D7B011-54DA-4835-B3C4-917AD6E73D74 /dev/block/sde&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;Setting name!&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;partNum is 47&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;REALLY setting name!&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;The operation has completed successfully.&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;sh-5.0# sgdisk --print /dev/block/sde&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;Disk /dev/block/sde: 1179648 sectors, 4.5 GiB&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;Logical sector size: 4096 bytes&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;Disk identifier (GUID): A9708BF8-6148-6573-F93F-EF3C911FC364&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;Partition table holds up to 64 entries&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;First usable sector is 6, last usable sector is 1179642&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;Partitions will be aligned on 2-sector boundaries&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;Total free space is 16379 sectors (64.0 MiB)&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;Number  Start (sector)    End (sector)  Size       Code  Name&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;   1               6              13   32.0 KiB    FFFF  sec&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;   2              14              21   32.0 KiB    FFFF  limits&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;   3              22              63   168.0 KiB   FFFF  bk41&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;   4              64              95   128.0 KiB   FFFF  qupfw_a&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;   5              96             127   128.0 KiB   FFFF  qupfw_b&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;   6             128             191   256.0 KiB   FFFF  apdp&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;   7             192             255   256.0 KiB   FFFF  msadp&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;   8             256             287   128.0 KiB   FFFF  vbmeta&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;   9             288             319   128.0 KiB   FFFF  bk42&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  10             320             351   128.0 KiB   FFFF  storsec_a&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  11             352             383   128.0 KiB   FFFF  storsec_b&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  12             384             447   256.0 KiB   FFFF  devcfg_a&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  13             448             511   256.0 KiB   FFFF  devcfg_b&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  14             512             639   512.0 KiB   FFFF  aop_a&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  15             640             767   512.0 KiB   FFFF  aop_b&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  16             768             895   512.0 KiB   FFFF  bk43&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  17             896            1023   512.0 KiB   FFFF  bk44&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  18            1024            1279   1024.0 KiB  FFFF  cmnlib_a&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  19            1280            1535   1024.0 KiB  FFFF  cmnlib_b&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  20            1536            1791   1024.0 KiB  FFFF  cmnlib64_a&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  21            1792            2047   1024.0 KiB  FFFF  cmnlib64_b&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  22            2048            2303   1024.0 KiB  FFFF  keymaster_a&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  23            2304            2559   1024.0 KiB  FFFF  keymaster_b&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  24            2560            2815   1024.0 KiB  FFFF  bluetooth&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  25            2816            3071   1024.0 KiB  FFFF  bk45&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  26            3072            3327   1024.0 KiB  FFFF  hyp_a&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  27            3328            3583   1024.0 KiB  FFFF  hyp_b&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  28            3584            3839   1024.0 KiB  FFFF  dip&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  29            3840            4095   1024.0 KiB  FFFF  bk46&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  30            4096            4607   2.0 MiB     FFFF  sti&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  31            4608            5119   2.0 MiB     FFFF  toolsfv&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  32            5120            5631   2.0 MiB     FFFF  abl_a&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  33            5632            6143   2.0 MiB     FFFF  abl_b&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  34            6144            7167   4.0 MiB     FFFF  tz_a&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  35            7168            8191   4.0 MiB     FFFF  tz_b&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  36            8192           10239   8.0 MiB     FFFF  fsg&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  37           10240           12287   8.0 MiB     FFFF  dtbo&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  38           12288           14335   8.0 MiB     FFFF  bk47&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  39           14336           16383   8.0 MiB     FFFF  spunvm&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  40           16384           20479   16.0 MiB    FFFF  bk48&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  41           20480           24575   16.0 MiB    FFFF  bk49&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  42           24576           32767   32.0 MiB    FFFF  splash&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  43           32768           40959   32.0 MiB    FFFF  logo&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  44           40960           49151   32.0 MiB    FFFF  dsp&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  45           49152           65535   64.0 MiB    FFFF  boot&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  46           65536          114687   192.0 MiB   0700  modem&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  47          114688          245759   512.0 MiB   FFFF  cust&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  48          245760         1163263   3.5 GiB     FFFF  system&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  49         1163264         1179642   64.0 MiB    FFFF  last_parti&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;sh-5.0#&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;h2 id=\&q;免责声明：\&q;&g;免责声明：&l;a title=\&q;#免责声明：\&q; href=\&q;#免责声明：\&q;&g;&l;/a&g;&l;/h2&g;\n&l;p&g;i：本人仅提供扩容文件，不对使用文件后造成的如：数据丢失、硬件损坏等后果负责。&l;br&g;\nii：您必须明白并且承担使用文件后所造成的后果。&l;br&g;\niii：如不同意以上内容请不要使用本文件。&l;/p&g;\n&l;p&g;扩容文件：&l;br&g;\nLink：&l;a href=\&q;https://pans.lanzous.com/b0dq5x2ni\&q; target=\&q;_blank\&q;&g;https://pans.lanzous.com/b0dq5x2ni&l;/a&g;&l;br&g;\nKey:idkzr&l;br&g;\n扩容视频：&l;br&g;\n&l;a href=\&q;http://www.bilibili.com/video/BV1gK411T74X\&q; target=\&q;_blank\&q;&g;http://www.bilibili.com/video/BV1gK411T74X&l;/a&g;&l;/p&g;\n&q;,&q;prev&q;:{&q;title&q;:&q;解决 Heroku-cli 无法登陆&q;,&q;link&q;:&q;posts/herokuclilogin&q;},&q;next&q;:{&q;title&q;:&q;碎片化信息&q;,&q;link&q;:&q;posts/sphxx&q;},&q;plink&q;:&q;https://blog.zr.ci/posts/mix2skr/&q;,&q;toc&q;:[{&q;id&q;:&q;前言：&q;,&q;title&q;:&q;前言：&q;,&q;index&q;:&q;1&q;},{&q;id&q;:&q;设备要求：&q;,&q;title&q;:&q;设备要求：&q;,&q;index&q;:&q;2&q;},{&q;id&q;:&q;有损扩容&q;,&q;title&q;:&q;有损扩容&q;,&q;index&q;:&q;3&q;,&q;children&q;:[{&q;id&q;:&q;使用方法：&q;,&q;title&q;:&q;使用方法：&q;,&q;index&q;:&q;3.1&q;},{&q;id&q;:&q;原理：&q;,&q;title&q;:&q;原理：&q;,&q;index&q;:&q;3.2&q;},{&q;id&q;:&q;常见问题：&q;,&q;title&q;:&q;常见问题：&q;,&q;index&q;:&q;3.3&q;}]},{&q;id&q;:&q;无损扩容&q;,&q;title&q;:&q;无损扩容&q;,&q;index&q;:&q;4&q;},{&q;id&q;:&q;免责声明：&q;,&q;title&q;:&q;免责声明：&q;,&q;index&q;:&q;5&q;}],&q;copyright&q;:{&q;author&q;:&q;箴扰&q;,&q;link&q;:&q;&l;a href=\&q;https://blog.zr.ci/posts/mix2skr/\&q; title=\&q;小米MIX 2S System分区扩容\&q;&g;https://blog.zr.ci/posts/mix2skr/&l;/a&g;&q;,&q;license&q;:&q;本博客所有文章除特别声明外，均采用(&l;a href=\&q;https://creativecommons.org/licenses/by-nc-sa/4.0/\&q; rel=\&q;nofollow\&q; target=\&q;_blank\&q;&g;CC BY-NC-SA 4.0&l;/a&g;)许可协议，转载请注明来源&l;a href=\&q;https://blog.zr.ci\&q; rel=\&q;nofollow\&q; target=\&q;_blank\&q;&g;箴扰&l;/a&g;！&q;}}}</script></head>
<body lang="zh-Hans">
<is-a class="φbm φk" ng-version="10.0.11"><is-l class="φeb φh"><div class="φel"><section class="φem"><header class="φec φf"><!----><is-c class="φed"><img draggable="false" class="φbw φw" src="https://www.gravatar.com/avatar/6a610305a94f20a4f2212eb510dc98b9?s=160" alt="" title="" width="160" height="160"></is-c><!----><a href="" class="φef φa φu">箴扰</a><p class="φee">分别便是为了重逢</p></header><div class="φeq φf"><a routerlink="/archives" class="φer φu" href="/archives"><span class="φd">14</span><span>归档</span></a><a class="φer φu" href="/categories/%E7%9E%8E%E6%8A%98%E8%85%BE"><span class="φd">2</span><span>分类</span></a><!----><a routerlink="/tags" class="φer φu" href="/tags"><span class="φd">15</span><span>标签</span></a><!----></div><!----><nav class="φen"><a class="φeo φbd φj φc φu φo" href="/">🏠　主页</a><!----><!----><!----><a class="φeo φbd φj φc φu φo" href="/links">🔗　邻居</a><!----><!----><!----><a class="φeo φbd φj φc φu φo" href="/about">📝　关于</a><!----><!----><!----><a class="φeo φbd φj φc φu φo" href="/search">🔍　搜索</a><!----><!----><!----><!----></nav><!----><div issnippet="" class="φbh"><is-palette2></is-palette2>
</div><!----><!----><!----></section><footer class="φeg φeh"><div class="φej"><a target="_blank" rel="external nofollow noopener" class="φek φbg φu icon-email" href="mailto:idkzrs@gmail.com">email</a><a target="_blank" rel="external nofollow noopener" class="φek φbg φu icon-feed" href="/atom.xml">feed</a><a target="_blank" rel="external nofollow noopener" class="φek φbg φu icon-github" href="https://github.com/idkzr">github</a><!----></div><!----><p class="φbk φz">© 2019-2020 ❤️ <a href="/">箴扰</a></p><!----><p class="φbk φz"><span class="φei">由 <a href="https://hexo.io" target="_blank" rel="external nofollow noopener">Hexo</a> 强力驱动</span><!----><span class="φei">主题 - <a href="https://github.com/ikeq/hexo-theme-inside" target="_blank" rel="external nofollow noopener">Inside</a></span><!----></p><!----><p class="φbk φz"><div><span title="总访客量"> UV : <span id="busuanzi_value_site_uv"></span></span> | <span title="总访问量"> PV : <span id="busuanzi_value_site_pv"></span></span></div></p><!----></footer></div></is-l><div class="φbo"><div class="φbn"><div class="φbs φbe"><main class="φbr φbf"><router-outlet></router-outlet><is-s class="φfx φf"><header class="φgh φgr" style="background-image:url(https://cdn.jsdelivr.net/gh/idkzr/static@master/imgs/mix2skr/cover.png);background-color:#111;"><div class="φgq"><!----><p class="φgj φr"><span class="φgk φgo">2020年8月9日</span><a class="φgk φgm φu" href="/categories/%E7%9E%8E%E6%8A%98%E8%85%BE">瞎折腾</a><!----><!----><!----></p><hr class="φgs"><!----><h1 class="φgt">小米MIX 2S System分区扩容</h1><!----></div></header><article itemscope="" itemtype="http://schema.org/Article" class="φga" data-title="小米MIX 2S System分区扩容"><div itemprop="articleBody" issnippet="" iszoomable="" class="φbk φh φz"><h2 id="前言：">前言：<a title="#前言：" href="#前言："></a></h2>
<p>由于MIX 2s的System分区过小，导致部分gsi无法刷入，故扩容分区，顺便制作为卡刷包方便使用。</p>
<a id="more"></a>
<h2 id="设备要求：">设备要求：<a title="#设备要求：" href="#设备要求："></a></h2>
<p>i：确保您的设备为小米MIX 2s<br>
ii：设备已解除BL锁并拥有第三方Recovery</p>
<h2 id="有损扩容">有损扩容<a title="#有损扩容" href="#有损扩容"></a></h2>
<h3 id="使用方法：">使用方法：<a title="#使用方法：" href="#使用方法："></a></h3>
<p>i：下载本人提供的 MIX2s_5GB_System.zip 文件<br>
ii：重启至Recovery<br>
iii：找到 MIX2s_5GB_System.zip 并刷入<br>
iv:重启至Recovery，格式化： System,Vendor,Data</p>
<p>注意：由于会清除 System,Vendor,Data 三个分区的数据，请提前备份您的所有重要数据，如果您的身边没有电脑或其它存储设备，请下载 los 的ROM并复制到 /cust 目录一份，方便刷入。</p>
<h3 id="原理：">原理：<a title="#原理：" href="#原理："></a></h3>
<p>使用sgdisk对磁盘进行重新分区</p>
<h3 id="常见问题：">常见问题：<a title="#常见问题：" href="#常见问题："></a></h3>
<p>Q:扩容之后可以还原吗？<br>
A:可以，刷一次3GB的文件即可还原。另：如果已经扩容分区，之后想更换其它的大小的分区，请务必先还原。<br>
Q:扩容之后可以刷官方ROM吗？<br>
A:可以，但是需要注意官方有dm校验，不去除会卡第一屏，可以通过同时刷入magisk去除。<br>
Q:扩容之后可以线刷吗？<br>
A:可以，但不推荐这样做，如果需要线刷，请勿勾选锁定选项，否则可能会导致需要售后解决。<br>
Q:为什么我扩容之后刷入ROM却显示System大小为3GB<br>
A:这是因为ROM打包时是按照3GB大小打包的，请前往Recovery，点击：分区管理 - System - 调整分区大小。Vendor分区同理。</p>
<h2 id="无损扩容">无损扩容<a title="#无损扩容" href="#无损扩容"></a></h2>
<p>此方法极度危险，并且不推荐使用，如果您没有相关经验，请谨慎。<br>
手机重启至第三方Recovery连接电脑，下载我提供的无损扩容文件<br>
解压并进入目录,按 Shift+右键 选择打开Powershell<br>
输入以下命令（此处为win10）：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">./adb push sgdisk /sbin</span><br><span class="line">./adb shell</span><br><span class="line">comod 0777 /sbin/sgdisk</span><br><span class="line"></span><br><span class="line">sgdisk --delete=18 /dev/block/sda</span><br><span class="line">sgdisk --delete=19 /dev/block/sda</span><br><span class="line">sgdisk --delete=20 /dev/block/sda</span><br><span class="line">sgdisk --delete=47 /dev/block/sde</span><br><span class="line">sgdisk --delete=48 /dev/block/sde</span><br><span class="line"></span><br><span class="line">sgdisk --new 0:0:+1024M --change-name=18:vendor --typecode=18:97D7B011-54DA-4835-B3C4-917AD6E73D74 /dev/block/sda</span><br><span class="line">sgdisk --new 0:0:+64M --change-name=19:recovery --typecode=19:9D72D4E4-9958-42DA-AC26-BEA7A90B0434 /dev/block/sda</span><br><span class="line">sgdisk --new 0:0:0 --change-name=20:cache --typecode=20:5594C694-C871-4B5F-90B1-690A6F68E0F7 /dev/block/sda</span><br><span class="line">sgdisk --new 0:0:+512M --change-name=47:cust --typecode=47:C3008246-512A-4FEB-8A51-068FA4AD5F6D /dev/block/sde</span><br><span class="line">sgdisk --new 0:0:0 --change-name=48:system --typecode=48:97D7B011-54DA-4835-B3C4-917AD6E73D74 /dev/block/sde</span><br><span class="line"></span><br><span class="line">reboot bootloader</span><br></pre></td></tr></tbody></table></figure>
<p>此时手机将重启至fastboot，保持设备连接，在Powershell中输入：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./fastboot flash recovery recovery.img</span><br><span class="line">./fastboot boot recovery.img</span><br></pre></td></tr></tbody></table></figure>
<p>不出意外，您的手机将重启至Recovery ，请保持设备连接。<br>
在Powershell中输入：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">./adb shell</span><br><span class="line"></span><br><span class="line">mke2fs -t ext4 -b 4096 /dev/block/sde47</span><br><span class="line">mke2fs -t ext4 -b 4096 /dev/block/sda18</span><br><span class="line">e2fsdroid -e -S /file_contexts -a /vendor /dev/block/sda18</span><br><span class="line">mke2fs -t ext4 -b 4096 /dev/block/sda20</span><br><span class="line">e2fsdroid -e -S /file_contexts -a /cache /dev/block/sda20</span><br><span class="line">mke2fs -t ext4 -b 4096 /dev/block/sde48</span><br><span class="line">e2fsdroid -e -S /file_contexts -a / /dev/block/sde48</span><br><span class="line">reboot recovery</span><br></pre></td></tr></tbody></table></figure>
<p>并在Recovery中格式化： System,Vendor,Data,Cache<br>
至此，扩容完成。</p>
<p>下方是本人执行扩容时的回显内容，可以参考。</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line">PS C:\platform-tools&gt; ./adb push sgdisk /sbin</span><br><span class="line">PS C:\platform-tools&gt; ./adb shell</span><br><span class="line">sh-5.0# chmod 0777 /sbin/sgdisk</span><br><span class="line">sh-5.0# sgdisk --delete=18 /dev/block/sda</span><br><span class="line">Warning: The kernel is still using the old partition table.</span><br><span class="line">The new table will be used at the next reboot.</span><br><span class="line">The operation has completed successfully.</span><br><span class="line">sh-5.0# sgdisk --delete=19 /dev/block/sda</span><br><span class="line">Warning: The kernel is still using the old partition table.</span><br><span class="line">The new table will be used at the next reboot.</span><br><span class="line">The operation has completed successfully.</span><br><span class="line">sh-5.0# sgdisk --delete=20 /dev/block/sda</span><br><span class="line">Warning: The kernel is still using the old partition table.</span><br><span class="line">The new table will be used at the next reboot.</span><br><span class="line">The operation has completed successfully.</span><br><span class="line">sh-5.0# sgdisk --delete=47 /dev/block/sde</span><br><span class="line">The operation has completed successfully.</span><br><span class="line">sh-5.0# sgdisk --delete=48 /dev/block/sde</span><br><span class="line">The operation has completed successfully.</span><br><span class="line">sh-5.0# sgdisk --new 0:0:+1024M --change-name=18:vendor --typecode=18:97D7B011-54DA-4835-B3C4-917AD6E73D74 /dev/block/&gt;</span><br><span class="line">Setting name!</span><br><span class="line">partNum is 17</span><br><span class="line">REALLY setting name!</span><br><span class="line">Warning: The kernel is still using the old partition table.</span><br><span class="line">The new table will be used at the next reboot.</span><br><span class="line">The operation has completed successfully.</span><br><span class="line"></span><br><span class="line">sh-5.0# sgdisk --new 0:0:+64M --change-name=19:recovery --typecode=19:9D72D4E4-9958-42DA-AC26-BEA7A90B0434 /dev/block/&gt;</span><br><span class="line">Setting name!</span><br><span class="line">partNum is 18</span><br><span class="line">REALLY setting name!</span><br><span class="line">Warning: The kernel is still using the old partition table.</span><br><span class="line">The new table will be used at the next reboot.</span><br><span class="line">The operation has completed successfully.</span><br><span class="line">sh-5.0# sgdisk --new 0:0:+0 --change-name=20:cache --typecode=20:5594C694-C871-4B5F-90B1-690A6F68E0F7 /dev/block/sda</span><br><span class="line">Setting name!</span><br><span class="line">partNum is 19</span><br><span class="line">REALLY setting name!</span><br><span class="line">Warning: The kernel is still using the old partition table.</span><br><span class="line">The new table will be used at the next reboot.</span><br><span class="line">The operation has completed successfully.</span><br><span class="line"></span><br><span class="line">sh-5.0# sgdisk --new 0:0:+512M --change-name=47:cust --typecode=47:C3008246-512A-4FEB-8A51-068FA4AD5F6D /dev/block/sde</span><br><span class="line">Setting name!</span><br><span class="line">partNum is 46</span><br><span class="line">REALLY setting name!</span><br><span class="line">The operation has completed successfully.</span><br><span class="line">sh-5.0# sgdisk --new 0:0:0 --change-name=48:system --typecode=48:97D7B011-54DA-4835-B3C4-917AD6E73D74 /dev/block/sde</span><br><span class="line">Setting name!</span><br><span class="line">partNum is 47</span><br><span class="line">REALLY setting name!</span><br><span class="line">The operation has completed successfully.</span><br><span class="line">sh-5.0# sgdisk --print /dev/block/sde</span><br><span class="line">Disk /dev/block/sde: 1179648 sectors, 4.5 GiB</span><br><span class="line">Logical sector size: 4096 bytes</span><br><span class="line">Disk identifier (GUID): A9708BF8-6148-6573-F93F-EF3C911FC364</span><br><span class="line">Partition table holds up to 64 entries</span><br><span class="line">First usable sector is 6, last usable sector is 1179642</span><br><span class="line">Partitions will be aligned on 2-sector boundaries</span><br><span class="line">Total free space is 16379 sectors (64.0 MiB)</span><br><span class="line"></span><br><span class="line">Number  Start (sector)    End (sector)  Size       Code  Name</span><br><span class="line">   1               6              13   32.0 KiB    FFFF  sec</span><br><span class="line">   2              14              21   32.0 KiB    FFFF  limits</span><br><span class="line">   3              22              63   168.0 KiB   FFFF  bk41</span><br><span class="line">   4              64              95   128.0 KiB   FFFF  qupfw_a</span><br><span class="line">   5              96             127   128.0 KiB   FFFF  qupfw_b</span><br><span class="line">   6             128             191   256.0 KiB   FFFF  apdp</span><br><span class="line">   7             192             255   256.0 KiB   FFFF  msadp</span><br><span class="line">   8             256             287   128.0 KiB   FFFF  vbmeta</span><br><span class="line">   9             288             319   128.0 KiB   FFFF  bk42</span><br><span class="line">  10             320             351   128.0 KiB   FFFF  storsec_a</span><br><span class="line">  11             352             383   128.0 KiB   FFFF  storsec_b</span><br><span class="line">  12             384             447   256.0 KiB   FFFF  devcfg_a</span><br><span class="line">  13             448             511   256.0 KiB   FFFF  devcfg_b</span><br><span class="line">  14             512             639   512.0 KiB   FFFF  aop_a</span><br><span class="line">  15             640             767   512.0 KiB   FFFF  aop_b</span><br><span class="line">  16             768             895   512.0 KiB   FFFF  bk43</span><br><span class="line">  17             896            1023   512.0 KiB   FFFF  bk44</span><br><span class="line">  18            1024            1279   1024.0 KiB  FFFF  cmnlib_a</span><br><span class="line">  19            1280            1535   1024.0 KiB  FFFF  cmnlib_b</span><br><span class="line">  20            1536            1791   1024.0 KiB  FFFF  cmnlib64_a</span><br><span class="line">  21            1792            2047   1024.0 KiB  FFFF  cmnlib64_b</span><br><span class="line">  22            2048            2303   1024.0 KiB  FFFF  keymaster_a</span><br><span class="line">  23            2304            2559   1024.0 KiB  FFFF  keymaster_b</span><br><span class="line">  24            2560            2815   1024.0 KiB  FFFF  bluetooth</span><br><span class="line">  25            2816            3071   1024.0 KiB  FFFF  bk45</span><br><span class="line">  26            3072            3327   1024.0 KiB  FFFF  hyp_a</span><br><span class="line">  27            3328            3583   1024.0 KiB  FFFF  hyp_b</span><br><span class="line">  28            3584            3839   1024.0 KiB  FFFF  dip</span><br><span class="line">  29            3840            4095   1024.0 KiB  FFFF  bk46</span><br><span class="line">  30            4096            4607   2.0 MiB     FFFF  sti</span><br><span class="line">  31            4608            5119   2.0 MiB     FFFF  toolsfv</span><br><span class="line">  32            5120            5631   2.0 MiB     FFFF  abl_a</span><br><span class="line">  33            5632            6143   2.0 MiB     FFFF  abl_b</span><br><span class="line">  34            6144            7167   4.0 MiB     FFFF  tz_a</span><br><span class="line">  35            7168            8191   4.0 MiB     FFFF  tz_b</span><br><span class="line">  36            8192           10239   8.0 MiB     FFFF  fsg</span><br><span class="line">  37           10240           12287   8.0 MiB     FFFF  dtbo</span><br><span class="line">  38           12288           14335   8.0 MiB     FFFF  bk47</span><br><span class="line">  39           14336           16383   8.0 MiB     FFFF  spunvm</span><br><span class="line">  40           16384           20479   16.0 MiB    FFFF  bk48</span><br><span class="line">  41           20480           24575   16.0 MiB    FFFF  bk49</span><br><span class="line">  42           24576           32767   32.0 MiB    FFFF  splash</span><br><span class="line">  43           32768           40959   32.0 MiB    FFFF  logo</span><br><span class="line">  44           40960           49151   32.0 MiB    FFFF  dsp</span><br><span class="line">  45           49152           65535   64.0 MiB    FFFF  boot</span><br><span class="line">  46           65536          114687   192.0 MiB   0700  modem</span><br><span class="line">  47          114688          245759   512.0 MiB   FFFF  cust</span><br><span class="line">  48          245760         1163263   3.5 GiB     FFFF  system</span><br><span class="line">  49         1163264         1179642   64.0 MiB    FFFF  last_parti</span><br><span class="line">sh-5.0#</span><br></pre></td></tr></tbody></table></figure>
<h2 id="免责声明：">免责声明：<a title="#免责声明：" href="#免责声明："></a></h2>
<p>i：本人仅提供扩容文件，不对使用文件后造成的如：数据丢失、硬件损坏等后果负责。<br>
ii：您必须明白并且承担使用文件后所造成的后果。<br>
iii：如不同意以上内容请不要使用本文件。</p>
<p>扩容文件：<br>
Link：<a href="https://pans.lanzous.com/b0dq5x2ni" target="_blank">https://pans.lanzous.com/b0dq5x2ni</a><br>
Key:idkzr<br>
扩容视频：<br>
<a href="http://www.bilibili.com/video/BV1gK411T74X" target="_blank">http://www.bilibili.com/video/BV1gK411T74X</a></p>
</div><is-f class="φcc φv φs"><!----><ul class="φcg"><li class="φce"><strong class="φcf">本文作者<span>:</span></strong><p class="φcd">箴扰</p></li><li class="φce"><strong class="φcf">本文链接<span>:</span></strong><p class="φcd"><a href="https://blog.zr.ci/posts/mix2skr/" title="小米MIX 2S System分区扩容">https://blog.zr.ci/posts/mix2skr/</a></p></li><li class="φce"><strong class="φcf">版权声明<span>:</span></strong><p class="φcd">本博客所有文章除特别声明外，均采用(<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="nofollow" target="_blank">CC BY-NC-SA 4.0</a>)许可协议，转载请注明来源<a href="https://blog.zr.ci" rel="nofollow" target="_blank">箴扰</a>！</p></li><!----></ul><!----></is-f><!----><!----><!----></article><footer class="φgb φh"><div class="φgg"><is-m class="φet"><a class="φeu φs φq" href="/tags/Android">Android</a></is-m><!----></div><!----><div class="φgc"><a class="φgd φgf φu" href="/posts/herokuclilogin">解决 Heroku-cli 无法登陆</a><!----><a class="φgd φge φu" href="/posts/sphxx">碎片化信息</a><!----></div><!----></footer><is-e class="φbz φh"><div issnippet="" class="φbh"><div id="vcomment"></div>

</div><!----><!----><!----><!----></is-e><!----><!----><!----></is-s><!----></main><!----></div></div></div><is-g class="φch"><div class="φcq"><span class="φbg icon-up"></span><span class="φbg icon-down"></span><!----><span class="φbg icon-toc"></span><!----><span class="φbg icon-search"></span><!----></div><div class="φcj φck"><svg class="φcp"><defs><filter id="dp"><feGaussianBlur in="SourceGraphic" stdDeviation="2"></feGaussianBlur></filter></defs><circle filter="url(#dp)" fill="rgba(0,0,0,.3)" cx="50%" cy="52%" r="44%"></circle><circle cx="50%" cy="50%" r="44%" class="φcl φbb"></circle><circle cx="50%" cy="50%" r="48%" class="φco φba" stroke-dasharray="0% 314.15926%"></circle><!----><g class="φcm"><circle r=".2rem" cx="0" cy="-.8rem"></circle><circle r=".2rem"></circle><circle r=".2rem" cx="0" cy=".8rem"></circle></g><!----></svg></div></is-g><is-n class="φev φf"><div class="φex φey φn"><a class="φfa φu"><!----><span class="φfc">前言：</span></a><!----></div><div class="φex φey φn"><a class="φfa φu"><!----><span class="φfc">设备要求：</span></a><!----></div><div class="φex φey φn"><a class="φfa φu"><!----><span class="φfc">有损扩容</span></a><div class="φex"><a class="φfa φu"><!----><span class="φfc">使用方法：</span></a><!----></div><div class="φex"><a class="φfa φu"><!----><span class="φfc">原理：</span></a><!----></div><div class="φex"><a class="φfa φu"><!----><span class="φfc">常见问题：</span></a><!----></div><!----><!----><!----></div><div class="φex φey φn"><a class="φfa φu"><!----><span class="φfc">无损扩容</span></a><!----></div><div class="φex φey φn"><a class="φfa φu"><!----><span class="φfc">免责声明：</span></a><!----></div><!----></is-n><!----><!----></is-a>
<script src="//cdn.jsdelivr.net/gh/idkzr/static@master/inside/bsz.js"></script><script src="//cdn.jsdelivr.net/gh/idkzr/static@master/inside/themes.js"></script><script src="//cdn.jsdelivr.net/gh/idkzr/static@master/inside/theme.js"></script><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><script src="/runtime.b15aa7186c559b492b7d.js"></script><script src="/polyfills.824ff89b5f3ca4543a31.js"></script><script src="/main.03652fc423a687c817e8.js"></script>

</body></html>