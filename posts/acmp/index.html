<!DOCTYPE html><html lang="zh-Hans"><head>
<meta charset="utf-8">
<title>Android使用 Termux 搭建web服务并实现外网访问 - 无名小筑</title>
<base href="/">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
<link rel="canonical" href="https://blog.zr.ci/posts/acmp/">
<link rel="icon" type="image/x-icon" href="/favicon.ico">
<link rel="manifest" href="/manifest.json">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="description" content="相信各位家里面应该都有闲置的Android设备，反正也是闲置，不如利用起来搭建一个小网站。">
<meta property="og:type" content="website">
<meta property="og:title" content="Android使用 Termux 搭建web服务并实现外网访问">
<meta property="og:url" content="https://blog.zr.ci/posts/acmp/index.html">
<meta property="og:site_name" content="无名小筑">
<meta property="og:description" content="相信各位家里面应该都有闲置的Android设备，反正也是闲置，不如利用起来搭建一个小网站。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/idkzr/static@master/imgs/acmp/cover.jpg">
<meta property="article:published_time" content="2020-04-03T14:11:00.000Z">
<meta property="article:modified_time" content="2020-04-03T14:11:00.000Z">
<meta property="article:author" content="箴扰">
<meta property="article:tag" content="Termux">
<meta property="article:tag" content="web">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/idkzr/static@master/imgs/acmp/cover.jpg">
<script type="application/ld+json">[{"@context":"http://schema.org","@type":"WebSite","publisher":{"@type":"Person","name":"箴扰","description":"分别便是为了重逢","image":"https://www.gravatar.com/avatar/6a610305a94f20a4f2212eb510dc98b9?s=160"},"url":"https://blog.zr.ci","image":"https://www.gravatar.com/avatar/6a610305a94f20a4f2212eb510dc98b9?s=160","description":"无名小筑，一个简简单单的博客，拿来记录一下生活，博主日常咕咕咕。","author":{"@type":"Person","name":"箴扰","description":"分别便是为了重逢","image":"https://www.gravatar.com/avatar/6a610305a94f20a4f2212eb510dc98b9?s=160"},"inLanguage":{"@type":"Language","alternateName":"zh-Hans"}},{"@context":"http://schema.org","@type":"Article","articleSection":"瞎折腾","url":"https://blog.zr.ci/posts/acmp.html","headline":"Android使用 Termux 搭建web服务并实现外网访问","image":"https://cdn.jsdelivr.net/gh/idkzr/static@master/imgs/acmp/cover.jpg","datePublished":"2020-04-03T14:11:00.000Z","dateModified":"2020-04-03T14:11:00.000Z","keywords":"Termux,web","description":"相信各位家里面应该都有闲置的Android设备，反正也是闲置，不如利用起来搭建一个小网站。","publisher":{"@type":"Organization","name":"无名小筑","logo":{"@type":"ImageObject","url":"https://www.gravatar.com/avatar/6a610305a94f20a4f2212eb510dc98b9?s=160"}},"author":{"@type":"Person","name":"箴扰","description":"分别便是为了重逢","image":"https://www.gravatar.com/avatar/6a610305a94f20a4f2212eb510dc98b9?s=160"},"inLanguage":{"@type":"Language","alternateName":"zh-Hans"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.zr.ci/posts/acmp.html"},"thumbnailUrl":"https://cdn.jsdelivr.net/gh/idkzr/static@master/imgs/acmp/cover.jpg"}]</script><link rel="alternate" type="application/atom+xml" title="无名小筑" href="/atom.xml">
<link href="//fonts.googleapis.com/css?family=Baloo+Bhaijaan|Inconsolata|Josefin+Sans|Montserrat" rel="stylesheet"><link href="/styles.43478ea7e28ed563c48b.css" rel="stylesheet">
<link rel="stylesheet" href="/theme.28760e21272c7fb12812.css" is="theme">

<script src="/config.cbc92a5068011152d161.js"></script>

<meta name="generator" content="Hexo 5.2.0"><meta name="theme-color" content="#111"><script type="application/json" is="state">{&q;api/cG9zdHMvYWNtcA.json&q;:{&q;title&q;:&q;Android使用 Termux 搭建web服务并实现外网访问&q;,&q;date&q;:&q;2020-04-03T14:11:00.000Z&q;,&q;date_formatted&q;:{&q;ll&q;:&q;2020年4月3日&q;,&q;L&q;:&q;2020/04/03&q;,&q;MM-DD&q;:&q;04-03&q;},&q;thumbnail&q;:&q;https://cdn.jsdelivr.net/gh/idkzr/static@master/imgs/acmp/cover.jpg&q;,&q;color&q;:&q;#111&q;,&q;link&q;:&q;posts/acmp&q;,&q;comments&q;:true,&q;tags&q;:[&q;Termux&q;,&q;web&q;],&q;categories&q;:[&q;瞎折腾&q;],&q;updated&q;:&q;2020-04-03T14:11:00.000Z&q;,&q;content&q;:&q;&l;p&g;相信各位家里面应该都有闲置的Android设备，反正也是闲置，不如利用起来搭建一个小网站。&l;/p&g;\n&l;a id=\&q;more\&q;&g;&l;/a&g;\n&l;p&g;&l;strong&g;文章已失效，仅供参考&l;/strong&g;&l;/p&g;\n&l;h2 id=\&q;前言\&q;&g;前言&l;a title=\&q;#前言\&q; href=\&q;#前言\&q;&g;&l;/a&g;&l;/h2&g;\n&l;p&g;termux是什么：&l;/p&g;\n&l;blockquote&g;\n&l;p&g;Termux是一个Android下一个高级的终端模拟器, 开源且不需要root, 支持apt管理软件包，十分方便安装软件包, 完美支持Python, PHP, Ruby, Go, Nodejs, MySQL等。&l;/p&g;\n&l;/blockquote&g;\n&l;h2 id=\&q;一、优化termux使用\&q;&g;一、优化termux使用&l;a title=\&q;#一、优化termux使用\&q; href=\&q;#一、优化termux使用\&q;&g;&l;/a&g;&l;/h2&g;\n&l;p&g;因为一些原因，termux自带的软件源在国内的速度并不理想，所以我们先使用以下命令修改为清华大学提供的软件源。&l;/p&g;\n&l;figure class=\&q;highlight shell\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;3&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;4&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;sed -i &a;#x27;s@^\\(deb.*stable main\\)$@#\\1\\ndeb https://mirrors.tuna.tsinghua.edu.cn/termux/termux-packages-24 stable main@&a;#x27; $PREFIX/etc/apt/sources.list&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;sed -i &a;#x27;s@^\\(deb.*games stable\\)$@#\\1\\ndeb https://mirrors.tuna.tsinghua.edu.cn/termux/game-packages-24 games stable@&a;#x27; $PREFIX/etc/apt/sources.list.d/game.list&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;sed -i &a;#x27;s@^\\(deb.*science stable\\)$@#\\1\\ndeb https://mirrors.tuna.tsinghua.edu.cn/termux/science-packages-24 science stable@&a;#x27; $PREFIX/etc/apt/sources.list.d/science.list&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;pkg up&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;输入： &l;code&g;termux-setup-storage&l;/code&g; 获取并授予存储权限&l;/p&g;\n&l;p&g;输入以下内容修复快捷键：&l;/p&g;\n&l;figure class=\&q;highlight shell\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;echo &a;quot;extra-keys = [[&a;#x27;ESC&a;#x27;,&a;#x27;TAB&a;#x27;,&a;#x27;CTRL&a;#x27;,&a;#x27;ALT&a;#x27;,&a;#x27;-&a;#x27;,&a;#x27;/&a;#x27;,&a;#x27;~&a;#x27;,&a;#x27;:&a;#x27;,&a;#x27;;&a;#x27;],[&a;#x27;[&a;#x27;,&a;#x27;!&a;#x27;,&a;#x27;PGUP&a;#x27;,&a;#x27;HOME&a;#x27;,&a;#x27;UP&a;#x27;,&a;#x27;END&a;#x27;,&a;#x27;PGDN&a;#x27;,&a;#x27;\\&a;quot;&a;#x27;,&a;#x27;]&a;#x27;],[&a;#x27;&a;#123;&a;#x27;,&a;#x27;&a;lt;&a;#x27;,&a;#x27;(&a;#x27;,&a;#x27;LEFT&a;#x27;,&a;#x27;DOWN&a;#x27;,&a;#x27;RIGHT&a;#x27;,&a;#x27;)&a;#x27;,&a;#x27;&a;gt;&a;#x27;,&a;#x27;&a;#125;&a;#x27;]]&a;quot; &a;gt;&a;gt; ~/.termux/termux.properties&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;可选操作：&l;/p&g;\n&l;p&g;安装zsh：&l;/p&g;\n&l;figure class=\&q;highlight shell\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;sh -c &a;quot;$(curl -fsSL https://gitee.com/idkzr/termux-ohmyzsh/raw/master/install.sh)&a;quot;&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;h2 id=\&q;二、安装caddy-mariadb-php\&q;&g;二、安装Caddy MariaDB PHP&l;a title=\&q;#二、安装caddy-mariadb-php\&q; href=\&q;#二、安装caddy-mariadb-php\&q;&g;&l;/a&g;&l;/h2&g;\n&l;p&g;Caddy是一个易于使用的通用web服务器。&l;/p&g;\n&l;p&g;MariaDB数据库管理系统是MySQL的一个分支，主要由开源社区在维护，采用GPL授权许可 MariaDB的目的是完全兼容MySQL，包括API和命令行，使之能轻松成为MySQL的代替品。&l;/p&g;\n&l;p&g;使用 &l;code&g;bash &a;lt;(curl https://idkzr.com/shell/acmp.sh)&l;/code&g;即可一键安装&l;/p&g;\n&l;p&g;什么？不想使用一键命令？&l;/p&g;\n&l;p&g;在Termux中依次执行&l;/p&g;\n&l;figure class=\&q;highlight shell\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;3&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;pkg i wget vim mariadb php php-fpm -y&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;curl https://getcaddy.com | bash -s personal&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;h2 id=\&q;三、配置mysql数据库\&q;&g;三、配置MySql数据库&l;a title=\&q;#三、配置mysql数据库\&q; href=\&q;#三、配置mysql数据库\&q;&g;&l;/a&g;&l;/h2&g;\n&l;p&g;输入 &l;code&g;mysqld&l;/code&g; 启动数据库，启动完成后,这个会话就一直存活,类似与debug调试一样,只有新建会话才可以操作。&l;/p&g;\n&l;p&g;新建一个termux会话&l;/p&g;\n&l;p&g;输入&l;code&g;mysql&l;/code&g;直接进入mariadb数据库，输入：&l;/p&g;\n&l;figure class=\&q;highlight plain\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;set password for &a;quot;root&a;quot;@&a;quot;localhost&a;quot; &a;#x3D; password(&a;quot;123456789&a;quot;)&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;将123456789修改为你要使用的密码&l;/p&g;\n&l;p&g;输入一下&l;code&g;mysql_secure_installation&l;/code&g;进入快速设置向导，输入当前密码既可。&l;/p&g;\n&l;p&g;下面根据个人偏好来进行设置,没有绝对的要求&l;/p&g;\n&l;p&g;Set root password? [Y/n] n#是否设置新的root密码&l;/p&g;\n&l;p&g;Remove anonymous users? [Y/n] Y#是否移除匿名用户&l;/p&g;\n&l;p&g;Disallow root login remotely? [Y/n] n#是否不允许root远程登录&l;/p&g;\n&l;p&g;Removetestdatabase and access to it? [Y/n] n#是否移除test数据库&l;/p&g;\n&l;p&g;Reload privilege tables now? [Y/n] y#是否重新加载表的权限&l;/p&g;\n&l;h2 id=\&q;四、配置php-fpm\&q;&g;四、配置PHP-fpm&l;a title=\&q;#四、配置php-fpm\&q; href=\&q;#四、配置php-fpm\&q;&g;&l;/a&g;&l;/h2&g;\n&l;p&g;输入&l;code&g;vim ../usr/etc/php-fpm.d/www.conf&l;/code&g;&l;br&g;\n找到：&l;code&g;listen = /data/data/com.termux/files/usr/var/run/php-fpm.sock&l;/code&g;&l;br&g;\n修改为：&l;code&g;127.0.0.1:9000&l;/code&g;&l;br&g;\n保存并退出&l;br&g;\n输入 &l;code&g;php-fpm&l;/code&g; 启动PHP&l;/p&g;\n&l;h2 id=\&q;五、配置typecho\&q;&g;五、配置Typecho&l;a title=\&q;#五、配置typecho\&q; href=\&q;#五、配置typecho\&q;&g;&l;/a&g;&l;/h2&g;\n&l;p&g;在内置存储新建一个 &l;code&g;www&l;/code&g; 文件夹&l;br&g;\n使用&l;code&g;ln -s /data/data/com.termux/files/home/storage/shared/www www&l;/code&g;将文件夹软连接到termux工作目录&l;br&g;\n将typecho程序解压到内置存储 www 文件夹中&l;/p&g;\n&l;p&g;输入 &l;code&g;caddy&l;/code&g;启动web服务&l;/p&g;\n&l;h2 id=\&q;六、配置frp\&q;&g;六、配置frp&l;a title=\&q;#六、配置frp\&q; href=\&q;#六、配置frp\&q;&g;&l;/a&g;&l;/h2&g;\n&l;p&g;新建一个termux会话&l;br&g;\n输入下方命令&l;/p&g;\n&l;figure class=\&q;highlight shell\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;3&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;4&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;5&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;6&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;7&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;8&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;9&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;meta\&q;&g;#&l;/span&g;&l;span class=\&q;bash\&q;&g;下载frpc二进制文件&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;mkdir frp &a;amp;&a;amp; cd frp &a;amp;&a;amp; wget https://qianqu.me/frp/frpc_linux_arm64 -O frpc &a;amp;&a;amp; chmod +x frpc&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;meta\&q;&g;#&l;/span&g;&l;span class=\&q;bash\&q;&g;创建配置文件&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;touch frpc.ini &a;amp;&a;amp; chmod +x frpc.ini&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;vim frpc.ini&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;将配置文件粘贴到frpc.ini中&l;br&g;\n输入./frpc启动frp&l;/p&g;\n&l;h2 id=\&q;end\&q;&g;END&l;a title=\&q;#end\&q; href=\&q;#end\&q;&g;&l;/a&g;&l;/h2&g;\n&q;,&q;prev&q;:{&q;title&q;:&q;愿逝者安息，愿生者奋发，愿祖国昌盛！&q;,&q;link&q;:&q;posts/rip&q;},&q;next&q;:{&q;title&q;:&q;可能是Windows上最强的开源任务管理器：Process Hacker&q;,&q;link&q;:&q;posts/process-hacker&q;},&q;plink&q;:&q;https://blog.zr.ci/posts/acmp/&q;,&q;toc&q;:[{&q;id&q;:&q;前言&q;,&q;title&q;:&q;前言&q;,&q;index&q;:&q;1&q;},{&q;id&q;:&q;一、优化termux使用&q;,&q;title&q;:&q;一、优化termux使用&q;,&q;index&q;:&q;2&q;},{&q;id&q;:&q;二、安装caddy-mariadb-php&q;,&q;title&q;:&q;二、安装Caddy MariaDB PHP&q;,&q;index&q;:&q;3&q;},{&q;id&q;:&q;三、配置mysql数据库&q;,&q;title&q;:&q;三、配置MySql数据库&q;,&q;index&q;:&q;4&q;},{&q;id&q;:&q;四、配置php-fpm&q;,&q;title&q;:&q;四、配置PHP-fpm&q;,&q;index&q;:&q;5&q;},{&q;id&q;:&q;五、配置typecho&q;,&q;title&q;:&q;五、配置Typecho&q;,&q;index&q;:&q;6&q;},{&q;id&q;:&q;六、配置frp&q;,&q;title&q;:&q;六、配置frp&q;,&q;index&q;:&q;7&q;},{&q;id&q;:&q;end&q;,&q;title&q;:&q;END&q;,&q;index&q;:&q;8&q;}],&q;copyright&q;:{&q;author&q;:&q;箴扰&q;,&q;link&q;:&q;&l;a href=\&q;https://blog.zr.ci/posts/acmp/\&q; title=\&q;Android使用 Termux 搭建web服务并实现外网访问\&q;&g;https://blog.zr.ci/posts/acmp/&l;/a&g;&q;,&q;license&q;:&q;本博客所有文章除特别声明外，均采用(&l;a href=\&q;https://creativecommons.org/licenses/by-nc-sa/4.0/\&q; rel=\&q;nofollow\&q; target=\&q;_blank\&q;&g;CC BY-NC-SA 4.0&l;/a&g;)许可协议，转载请注明来源&l;a href=\&q;https://blog.zr.ci\&q; rel=\&q;nofollow\&q; target=\&q;_blank\&q;&g;箴扰&l;/a&g;！&q;}}}</script></head>
<body lang="zh-Hans">
<is-a class="φbm φk" ng-version="10.0.11"><is-l class="φeb φh"><div class="φel"><section class="φem"><header class="φec φf"><!----><is-c class="φed"><img draggable="false" class="φbw φw" src="https://www.gravatar.com/avatar/6a610305a94f20a4f2212eb510dc98b9?s=160" alt="" title="" width="160" height="160"></is-c><!----><a href="" class="φef φa φu">箴扰</a><p class="φee">分别便是为了重逢</p></header><div class="φeq φf"><a routerlink="/archives" class="φer φu" href="/archives"><span class="φd">14</span><span>归档</span></a><a class="φer φu" href="/categories/%E7%9E%8E%E6%8A%98%E8%85%BE"><span class="φd">2</span><span>分类</span></a><!----><a routerlink="/tags" class="φer φu" href="/tags"><span class="φd">15</span><span>标签</span></a><!----></div><!----><nav class="φen"><a class="φeo φbd φj φc φu φo" href="/">🏠　主页</a><!----><!----><!----><a class="φeo φbd φj φc φu φo" href="/links">🔗　邻居</a><!----><!----><!----><a class="φeo φbd φj φc φu φo" href="/about">📝　关于</a><!----><!----><!----><a class="φeo φbd φj φc φu φo" href="/search">🔍　搜索</a><!----><!----><!----><!----></nav><!----><div issnippet="" class="φbh"><is-palette2></is-palette2>
</div><!----><!----><!----></section><footer class="φeg φeh"><div class="φej"><a target="_blank" rel="external nofollow noopener" class="φek φbg φu icon-email" href="mailto:idkzrs@gmail.com">email</a><a target="_blank" rel="external nofollow noopener" class="φek φbg φu icon-feed" href="/atom.xml">feed</a><a target="_blank" rel="external nofollow noopener" class="φek φbg φu icon-github" href="https://github.com/idkzr">github</a><!----></div><!----><p class="φbk φz">© 2019-2020 ❤️ <a href="/">箴扰</a></p><!----><p class="φbk φz"><span class="φei">由 <a href="https://hexo.io" target="_blank" rel="external nofollow noopener">Hexo</a> 强力驱动</span><!----><span class="φei">主题 - <a href="https://github.com/ikeq/hexo-theme-inside" target="_blank" rel="external nofollow noopener">Inside</a></span><!----></p><!----><p class="φbk φz"><div><span title="总访客量"> UV : <span id="busuanzi_value_site_uv"></span></span> | <span title="总访问量"> PV : <span id="busuanzi_value_site_pv"></span></span></div></p><!----></footer></div></is-l><div class="φbo"><div class="φbn"><div class="φbs φbe"><main class="φbr φbf"><router-outlet></router-outlet><is-s class="φfx φf"><header class="φgh φgr" style="background-image:url(https://cdn.jsdelivr.net/gh/idkzr/static@master/imgs/acmp/cover.jpg);background-color:#111;"><div class="φgq"><!----><p class="φgj φr"><span class="φgk φgo">2020年4月3日</span><a class="φgk φgm φu" href="/categories/%E7%9E%8E%E6%8A%98%E8%85%BE">瞎折腾</a><!----><!----><!----></p><hr class="φgs"><!----><h1 class="φgt">Android使用 Termux 搭建web服务并实现外网访问</h1><!----></div></header><article itemscope="" itemtype="http://schema.org/Article" class="φga" data-title="Android使用 Termux 搭建web服务并实现外网访问"><div itemprop="articleBody" issnippet="" iszoomable="" class="φbk φh φz"><p>相信各位家里面应该都有闲置的Android设备，反正也是闲置，不如利用起来搭建一个小网站。</p>
<a id="more"></a>
<p><strong>文章已失效，仅供参考</strong></p>
<h2 id="前言">前言<a title="#前言" href="#前言"></a></h2>
<p>termux是什么：</p>
<blockquote>
<p>Termux是一个Android下一个高级的终端模拟器, 开源且不需要root, 支持apt管理软件包，十分方便安装软件包, 完美支持Python, PHP, Ruby, Go, Nodejs, MySQL等。</p>
</blockquote>
<h2 id="一、优化termux使用">一、优化termux使用<a title="#一、优化termux使用" href="#一、优化termux使用"></a></h2>
<p>因为一些原因，termux自带的软件源在国内的速度并不理想，所以我们先使用以下命令修改为清华大学提供的软件源。</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sed -i 's@^\(deb.*stable main\)$@#\1\ndeb https://mirrors.tuna.tsinghua.edu.cn/termux/termux-packages-24 stable main@' $PREFIX/etc/apt/sources.list</span><br><span class="line">sed -i 's@^\(deb.*games stable\)$@#\1\ndeb https://mirrors.tuna.tsinghua.edu.cn/termux/game-packages-24 games stable@' $PREFIX/etc/apt/sources.list.d/game.list</span><br><span class="line">sed -i 's@^\(deb.*science stable\)$@#\1\ndeb https://mirrors.tuna.tsinghua.edu.cn/termux/science-packages-24 science stable@' $PREFIX/etc/apt/sources.list.d/science.list</span><br><span class="line">pkg up</span><br></pre></td></tr></tbody></table></figure>
<p>输入： <code>termux-setup-storage</code> 获取并授予存储权限</p>
<p>输入以下内容修复快捷键：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo "extra-keys = [['ESC','TAB','CTRL','ALT','-','/','~',':',';'],['[','!','PGUP','HOME','UP','END','PGDN','\"',']'],['{','&lt;','(','LEFT','DOWN','RIGHT',')','&gt;','}']]" &gt;&gt; ~/.termux/termux.properties</span><br></pre></td></tr></tbody></table></figure>
<p>可选操作：</p>
<p>安装zsh：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh -c "$(curl -fsSL https://gitee.com/idkzr/termux-ohmyzsh/raw/master/install.sh)"</span><br></pre></td></tr></tbody></table></figure>
<h2 id="二、安装caddy-mariadb-php">二、安装Caddy MariaDB PHP<a title="#二、安装caddy-mariadb-php" href="#二、安装caddy-mariadb-php"></a></h2>
<p>Caddy是一个易于使用的通用web服务器。</p>
<p>MariaDB数据库管理系统是MySQL的一个分支，主要由开源社区在维护，采用GPL授权许可 MariaDB的目的是完全兼容MySQL，包括API和命令行，使之能轻松成为MySQL的代替品。</p>
<p>使用 <code>bash &lt;(curl https://idkzr.com/shell/acmp.sh)</code>即可一键安装</p>
<p>什么？不想使用一键命令？</p>
<p>在Termux中依次执行</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pkg i wget vim mariadb php php-fpm -y</span><br><span class="line"></span><br><span class="line">curl https://getcaddy.com | bash -s personal</span><br></pre></td></tr></tbody></table></figure>
<h2 id="三、配置mysql数据库">三、配置MySql数据库<a title="#三、配置mysql数据库" href="#三、配置mysql数据库"></a></h2>
<p>输入 <code>mysqld</code> 启动数据库，启动完成后,这个会话就一直存活,类似与debug调试一样,只有新建会话才可以操作。</p>
<p>新建一个termux会话</p>
<p>输入<code>mysql</code>直接进入mariadb数据库，输入：</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set password for "root"@"localhost" = password("123456789")</span><br></pre></td></tr></tbody></table></figure>
<p>将123456789修改为你要使用的密码</p>
<p>输入一下<code>mysql_secure_installation</code>进入快速设置向导，输入当前密码既可。</p>
<p>下面根据个人偏好来进行设置,没有绝对的要求</p>
<p>Set root password? [Y/n] n#是否设置新的root密码</p>
<p>Remove anonymous users? [Y/n] Y#是否移除匿名用户</p>
<p>Disallow root login remotely? [Y/n] n#是否不允许root远程登录</p>
<p>Removetestdatabase and access to it? [Y/n] n#是否移除test数据库</p>
<p>Reload privilege tables now? [Y/n] y#是否重新加载表的权限</p>
<h2 id="四、配置php-fpm">四、配置PHP-fpm<a title="#四、配置php-fpm" href="#四、配置php-fpm"></a></h2>
<p>输入<code>vim ../usr/etc/php-fpm.d/www.conf</code><br>
找到：<code>listen = /data/data/com.termux/files/usr/var/run/php-fpm.sock</code><br>
修改为：<code>127.0.0.1:9000</code><br>
保存并退出<br>
输入 <code>php-fpm</code> 启动PHP</p>
<h2 id="五、配置typecho">五、配置Typecho<a title="#五、配置typecho" href="#五、配置typecho"></a></h2>
<p>在内置存储新建一个 <code>www</code> 文件夹<br>
使用<code>ln -s /data/data/com.termux/files/home/storage/shared/www www</code>将文件夹软连接到termux工作目录<br>
将typecho程序解压到内置存储 www 文件夹中</p>
<p>输入 <code>caddy</code>启动web服务</p>
<h2 id="六、配置frp">六、配置frp<a title="#六、配置frp" href="#六、配置frp"></a></h2>
<p>新建一个termux会话<br>
输入下方命令</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">下载frpc二进制文件</span></span><br><span class="line"></span><br><span class="line">mkdir frp &amp;&amp; cd frp &amp;&amp; wget https://qianqu.me/frp/frpc_linux_arm64 -O frpc &amp;&amp; chmod +x frpc</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">创建配置文件</span></span><br><span class="line"></span><br><span class="line">touch frpc.ini &amp;&amp; chmod +x frpc.ini</span><br><span class="line"></span><br><span class="line">vim frpc.ini</span><br></pre></td></tr></tbody></table></figure>
<p>将配置文件粘贴到frpc.ini中<br>
输入./frpc启动frp</p>
<h2 id="end">END<a title="#end" href="#end"></a></h2>
</div><is-f class="φcc φv φs"><!----><ul class="φcg"><li class="φce"><strong class="φcf">本文作者<span>:</span></strong><p class="φcd">箴扰</p></li><li class="φce"><strong class="φcf">本文链接<span>:</span></strong><p class="φcd"><a href="https://blog.zr.ci/posts/acmp/" title="Android使用 Termux 搭建web服务并实现外网访问">https://blog.zr.ci/posts/acmp/</a></p></li><li class="φce"><strong class="φcf">版权声明<span>:</span></strong><p class="φcd">本博客所有文章除特别声明外，均采用(<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="nofollow" target="_blank">CC BY-NC-SA 4.0</a>)许可协议，转载请注明来源<a href="https://blog.zr.ci" rel="nofollow" target="_blank">箴扰</a>！</p></li><!----></ul><!----></is-f><!----><!----><!----></article><footer class="φgb φh"><div class="φgg"><is-m class="φet"><a class="φeu φs φq" href="/tags/Termux">Termux</a></is-m><is-m class="φet"><a class="φeu φs φq" href="/tags/web">web</a></is-m><!----></div><!----><div class="φgc"><a class="φgd φgf φu" href="/posts/rip">愿逝者安息，愿生者奋发，愿祖国昌盛！</a><!----><a class="φgd φge φu" href="/posts/process-hacker">可能是Windows上最强的开源任务管理器：Process Hacker</a><!----></div><!----></footer><is-e class="φbz φh"><div issnippet="" class="φbh"><div id="vcomment"></div>

</div><!----><!----><!----><!----></is-e><!----><!----><!----></is-s><!----></main><!----></div></div></div><is-g class="φch"><div class="φcq"><span class="φbg icon-up"></span><span class="φbg icon-down"></span><!----><span class="φbg icon-toc"></span><!----><span class="φbg icon-search"></span><!----></div><div class="φcj φck"><svg class="φcp"><defs><filter id="dp"><feGaussianBlur in="SourceGraphic" stdDeviation="2"></feGaussianBlur></filter></defs><circle filter="url(#dp)" fill="rgba(0,0,0,.3)" cx="50%" cy="52%" r="44%"></circle><circle cx="50%" cy="50%" r="44%" class="φcl φbb"></circle><circle cx="50%" cy="50%" r="48%" class="φco φba" stroke-dasharray="0% 314.15926%"></circle><!----><g class="φcm"><circle r=".2rem" cx="0" cy="-.8rem"></circle><circle r=".2rem"></circle><circle r=".2rem" cx="0" cy=".8rem"></circle></g><!----></svg></div></is-g><is-n class="φev φf"><div class="φex φey φn"><a class="φfa φu"><!----><span class="φfc">前言</span></a><!----></div><div class="φex φey φn"><a class="φfa φu"><!----><span class="φfc">一、优化termux使用</span></a><!----></div><div class="φex φey φn"><a class="φfa φu"><!----><span class="φfc">二、安装Caddy MariaDB PHP</span></a><!----></div><div class="φex φey φn"><a class="φfa φu"><!----><span class="φfc">三、配置MySql数据库</span></a><!----></div><div class="φex φey φn"><a class="φfa φu"><!----><span class="φfc">四、配置PHP-fpm</span></a><!----></div><div class="φex φey φn"><a class="φfa φu"><!----><span class="φfc">五、配置Typecho</span></a><!----></div><div class="φex φey φn"><a class="φfa φu"><!----><span class="φfc">六、配置frp</span></a><!----></div><div class="φex φey φn"><a class="φfa φu"><!----><span class="φfc">END</span></a><!----></div><!----></is-n><!----><!----></is-a>
<script src="//cdn.jsdelivr.net/gh/idkzr/static@master/inside/bsz.js"></script><script src="//cdn.jsdelivr.net/gh/idkzr/static@master/inside/themes.js"></script><script src="//cdn.jsdelivr.net/gh/idkzr/static@master/inside/theme.js"></script><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><script src="/runtime.b15aa7186c559b492b7d.js"></script><script src="/polyfills.824ff89b5f3ca4543a31.js"></script><script src="/main.03652fc423a687c817e8.js"></script>

</body></html>