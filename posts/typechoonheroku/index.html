<!DOCTYPE html><html lang="zh-Hans"><head>
<meta charset="utf-8">
<title>Heroku部署安装Typecho - 无名小筑</title>
<base href="/">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
<link rel="canonical" href="https://blog.zr.ci/posts/typechoonheroku/">
<link rel="icon" type="image/x-icon" href="/favicon.ico">
<link rel="manifest" href="/manifest.json">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="description" content="突然发现Heroku的玩法属实不少，便想着能不能在Heroku上部署安装Typecho，写篇文章记录一下。">
<meta property="og:type" content="website">
<meta property="og:title" content="Heroku部署安装Typecho">
<meta property="og:url" content="https://blog.zr.ci/posts/typechoonheroku/index.html">
<meta property="og:site_name" content="无名小筑">
<meta property="og:description" content="突然发现Heroku的玩法属实不少，便想着能不能在Heroku上部署安装Typecho，写篇文章记录一下。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/idkzr/static@master/imgs/typechoonheroku/cover.jpg">
<meta property="article:published_time" content="2020-11-26T14:11:00.000Z">
<meta property="article:modified_time" content="2020-11-26T14:11:00.000Z">
<meta property="article:author" content="箴扰">
<meta property="article:tag" content="Heroku,Typecho">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/idkzr/static@master/imgs/typechoonheroku/cover.jpg">
<script type="application/ld+json">[{"@context":"http://schema.org","@type":"WebSite","publisher":{"@type":"Person","name":"箴扰","description":"分别便是为了重逢","image":"https://www.gravatar.com/avatar/6a610305a94f20a4f2212eb510dc98b9?s=160"},"url":"https://blog.zr.ci","image":"https://www.gravatar.com/avatar/6a610305a94f20a4f2212eb510dc98b9?s=160","description":"无名小筑，一个简简单单的博客，拿来记录一下生活，博主日常咕咕咕。","author":{"@type":"Person","name":"箴扰","description":"分别便是为了重逢","image":"https://www.gravatar.com/avatar/6a610305a94f20a4f2212eb510dc98b9?s=160"},"inLanguage":{"@type":"Language","alternateName":"zh-Hans"}},{"@context":"http://schema.org","@type":"Article","articleSection":"瞎折腾","url":"https://blog.zr.ci/posts/typechoonheroku.html","headline":"Heroku部署安装Typecho","image":"https://cdn.jsdelivr.net/gh/idkzr/static@master/imgs/typechoonheroku/cover.jpg","datePublished":"2020-11-26T14:11:00.000Z","dateModified":"2020-11-26T14:11:00.000Z","keywords":"Heroku,Typecho","description":"突然发现Heroku的玩法属实不少，便想着能不能在Heroku上部署安装Typecho，写篇文章记录一下。","publisher":{"@type":"Organization","name":"无名小筑","logo":{"@type":"ImageObject","url":"https://www.gravatar.com/avatar/6a610305a94f20a4f2212eb510dc98b9?s=160"}},"author":{"@type":"Person","name":"箴扰","description":"分别便是为了重逢","image":"https://www.gravatar.com/avatar/6a610305a94f20a4f2212eb510dc98b9?s=160"},"inLanguage":{"@type":"Language","alternateName":"zh-Hans"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.zr.ci/posts/typechoonheroku.html"},"thumbnailUrl":"https://cdn.jsdelivr.net/gh/idkzr/static@master/imgs/typechoonheroku/cover.jpg"}]</script><link rel="alternate" type="application/atom+xml" title="无名小筑" href="/atom.xml">
<link href="//fonts.googleapis.com/css?family=Baloo+Bhaijaan|Inconsolata|Josefin+Sans|Montserrat" rel="stylesheet"><link href="/styles.43478ea7e28ed563c48b.css" rel="stylesheet">
<link rel="stylesheet" href="/theme.28760e21272c7fb12812.css" is="theme">

<script src="/config.cbc92a5068011152d161.js"></script>

<meta name="generator" content="Hexo 5.2.0"><meta name="theme-color" content="#111"><script type="application/json" is="state">{&q;api/cG9zdHMvdHlwZWNob29uaGVyb2t1.json&q;:{&q;title&q;:&q;Heroku部署安装Typecho&q;,&q;date&q;:&q;2020-11-26T14:11:00.000Z&q;,&q;date_formatted&q;:{&q;ll&q;:&q;2020年11月26日&q;,&q;L&q;:&q;2020/11/26&q;,&q;MM-DD&q;:&q;11-26&q;},&q;thumbnail&q;:&q;https://cdn.jsdelivr.net/gh/idkzr/static@master/imgs/typechoonheroku/cover.jpg&q;,&q;color&q;:&q;#111&q;,&q;link&q;:&q;posts/typechoonheroku&q;,&q;comments&q;:true,&q;tags&q;:[&q;Heroku,Typecho&q;],&q;categories&q;:[&q;瞎折腾&q;],&q;updated&q;:&q;2020-11-26T14:11:00.000Z&q;,&q;content&q;:&q;&l;p&g;突然发现Heroku的玩法属实不少，便想着能不能在Heroku上部署安装Typecho，写篇文章记录一下。&l;/p&g;\n&l;a id=\&q;more\&q;&g;&l;/a&g;\n&l;h2 id=\&q;什么是-heroku？\&q;&g;什么是 Heroku？&l;a title=\&q;#什么是-heroku？\&q; href=\&q;#什么是-heroku？\&q;&g;&l;/a&g;&l;/h2&g;\n&l;p&g;Heroku 是一个支持多种编程语言的 PaaS(Platform-as-a-Service)。在 2010 年被 Salesforce 收购。Heroku 作为最开始的云平台之一，从 2007 年 6 月起开始开发，当时它仅支持 Ruby，后来增加了对 Java、Node.js、Scala、Clojure、Python 以及 PHP 和 Perl 的支持。&l;/p&g;\n&l;h2 id=\&q;1.heroku基本配置\&q;&g;1.Heroku基本配置&l;a title=\&q;#1.heroku基本配置\&q; href=\&q;#1.heroku基本配置\&q;&g;&l;/a&g;&l;/h2&g;\n&l;p&g;首先，我们需要一个 Heroku 账号，如果你还没有，请自行注册一个，并绑定一张信用卡&a;amp;借记卡，这里不做多讲。&l;/p&g;\n&l;h3 id=\&q;1.1-安装heroku-cli\&q;&g;1.1 安装Heroku-cli&l;a title=\&q;#1.1-安装heroku-cli\&q; href=\&q;#1.1-安装heroku-cli\&q;&g;&l;/a&g;&l;/h3&g;\n&l;p&g;如果你的设备上已经安装了 Nodejs ，那么可以使用：&l;code&g;npm i heroku-cli -g&l;/code&g;来安装&l;code&g;heroku-cli&l;/code&g;&l;/p&g;\n&l;p&g;否则请按照&l;a href=\&q;https://devcenter.heroku.com/articles/heroku-cli\&q; target=\&q;_blank\&q;&g;官方文档&l;/a&g;安装 &l;code&g;heroku-cli&l;/code&g;&l;/p&g;\n&l;p&g;安装完成后使用：&l;code&g;heroku version&l;/code&g;来检查是否成功安装，如有类似以下输出则代表安装成功。&l;/p&g;\n&l;figure class=\&q;highlight shell\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;meta\&q;&g;</head>l;/span&g;&l;span class=\&q;bash\&q;&g; heroku version&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;heroku-cli/7.0.9 android-arm64 node-v12.18.3&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;h3 id=\&q;1.2-配置heroku-cli\&q;&g;1.2 配置Heroku-cli&l;a title=\&q;#1.2-配置heroku-cli\&q; href=\&q;#1.2-配置heroku-cli\&q;&g;&l;/a&g;&l;/h3&g;\n&l;p&g;安装完成&l;code&g;heroku-cli&l;/code&g;后，使用&l;code&g;heroku login -i&l;/code&g;登陆Heroku，回显如下：&l;/p&g;\n&l;figure class=\&q;highlight shell\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;3&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;4&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;5&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;6&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;meta\&q;&g;</head>l;/span&g;&l;span class=\&q;bash\&q;&g; heroku login -i&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;heroku: Enter your login credentials&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;Email: idkzrs@gmail.com&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;Password: &l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;Two-factor code: &l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;Logged in as idkzrs@gmail.com&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;如果以上命令无法登陆，请参考&l;a href=\&q;https://blog.zr.ci/posts/herokuclilogin\&q; target=\&q;_blank\&q;&g;解决 Heroku-cli 无法登陆&l;/a&g;&l;/p&g;\n&l;p&g;然后添加 SSH 密钥:&l;/p&g;\n&l;figure class=\&q;highlight plain\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;$ heroku keys:add&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;h2 id=\&q;2.部署typecho至heroku\&q;&g;2.部署Typecho至Heroku&l;a title=\&q;#2.部署typecho至heroku\&q; href=\&q;#2.部署typecho至heroku\&q;&g;&l;/a&g;&l;/h2&g;\n&l;p&g;heroku-cli配置完成后就可以开始准备部署了。&l;/p&g;\n&l;h3 id=\&q;2.1-新建-typecho-项目\&q;&g;2.1 新建 Typecho 项目&l;a title=\&q;#2.1-新建-typecho-项目\&q; href=\&q;#2.1-新建-typecho-项目\&q;&g;&l;/a&g;&l;/h3&g;\n&l;p&g;拉取Typecho源码并修改：&l;/p&g;\n&l;figure class=\&q;highlight shell\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;3&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;4&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;5&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;6&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;git clone https://github.com/typecho/typecho.git&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;cd typecho&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;rm -rf .git* changelog.txt .editorconfig README.md&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;git clone https://github.com/rvvcim/typecho-on-heroku.git&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;mv toh/* toh/.htaccess .&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;rm -rf toh&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;初始化Git仓库：&l;/p&g;\n&l;figure class=\&q;highlight shell\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;3&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;git init&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;git add .&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;git commit -m &a;#x27;init heroku-te&a;#x27;&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;h3 id=\&q;2.2-新建-heroku-应用\&q;&g;2.2 新建 Heroku 应用&l;a title=\&q;#2.2-新建-heroku-应用\&q; href=\&q;#2.2-新建-heroku-应用\&q;&g;&l;/a&g;&l;/h3&g;\n&l;p&g;这步可以在web操作，也可以使用 heroku-cli 进行配置，这里我使用 cli 来进行操作。&l;br&g;\n使用&l;code&g;heroku create&l;/code&g;新建APP，创建成功将会输出类似如下内容:&l;/p&g;\n&l;figure class=\&q;highlight shell\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;3&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;meta\&q;&g;</head>l;/span&g;&l;span class=\&q;bash\&q;&g; heroku create&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;Creating app... done, ⬢ xxxxxx-xxxx-12345&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;https://xxxxxx-xxxx-12345.herokuapp.com/ | https://git.heroku.com/xxxxxx-xxxx-12345&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;其中：&l;br&g;\n&l;code&g;xxxxxx-xxxx-12345&l;/code&g;为应用名称&l;br&g;\n&l;code&g;https://xxxxxx-xxxx-12345.herokuapp.com/&l;/code&g;为访问链接&l;br&g;\n&l;code&g;https://git.heroku.com/xxxxxx-xxxx-12345&l;/code&g;为git仓库&l;/p&g;\n&l;p&g;应用名称可以使用&l;code&g;heroku rename&l;/code&g;进行修改，此操作将会同步修改访问链接和git仓库地址，如：&l;/p&g;\n&l;figure class=\&q;highlight shell\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;meta\&q;&g;</head>l;/span&g;&l;span class=\&q;bash\&q;&g; heroku rename zr-te&l;/span&g;&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;h3 id=\&q;2.3-设置应用语言\&q;&g;2.3 设置应用语言&l;a title=\&q;#2.3-设置应用语言\&q; href=\&q;#2.3-设置应用语言\&q;&g;&l;/a&g;&l;/h3&g;\n&l;p&g;使用如下命令将应用语言设置为PHP：&l;/p&g;\n&l;figure class=\&q;highlight shell\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;heroku buildpacks:set heroku/php&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;若不设置语言可能导致上传时报错&l;/p&g;\n&l;h3 id=\&q;2.3-数据库配置\&q;&g;2.3 数据库配置&l;a title=\&q;#2.3-数据库配置\&q; href=\&q;#2.3-数据库配置\&q;&g;&l;/a&g;&l;/h3&g;\n&l;p&g;Heroku提供了 MySQL 和 PgSQL 两种数据库，以插件形式添加，并各有一定免费额度，两种数据库二选一即可。&l;br&g;\n添加MySQL插件：&l;/p&g;\n&l;figure class=\&q;highlight shell\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;heroku addons:create jawsdb-maria:kitefin&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;添加PgSQL插件：&l;/p&g;\n&l;figure class=\&q;highlight shell\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;heroku addons:create heroku-postgresql:hobby-dev&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;注：二选一即可，我这里使用MySQL举例。&l;/p&g;\n&l;p&g;添加完 MySQL/PgSQL后，前往&l;a href=\&q;https://dashboard.heroku.com/apps\&q; target=\&q;_blank\&q;&g;Heroku管理面板&l;/a&g;，找到刚才新建的应用，点击导航栏中的&l;strong&g;Settings&l;/strong&g;，找到 &l;strong&g;Config Vars&l;/strong&g; 项，点击&l;strong&g;Reveal Config Vars&l;/strong&g;&l;br&g;\n&l;img src=\&q;/storage/emulated/0/ZR/static/imgs/typechoonheroku/configvars.jpg\&q; alt=\&q;\&q;&g;&l;br&g;\n将会显示MySQL/PgSQL连接信息，解析如下：&l;/p&g;\n&l;div class=\&q;φcy\&q;&g;&l;div class=\&q;φda\&q;&g;&l;table&g;&l;thead&g;\n&l;tr&g;\n&l;th style=\&q;text-align:center\&q;&g;NAME&l;/th&g;\n&l;th style=\&q;text-align:center\&q;&g;KEY&l;/th&g;\n&l;th style=\&q;text-align:center\&q;&g;VALUE&l;/th&g;\n&l;/tr&g;\n&l;/thead&g;\n&l;tbody&g;\n&l;tr&g;\n&l;td style=\&q;text-align:center\&q;&g;MySQL&l;/td&g;\n&l;td style=\&q;text-align:center\&q;&g;JAWSDB_MARIA_URL&l;/td&g;\n&l;td style=\&q;text-align:center\&q;&g;mysql://用户名:密码@数据库主机:3306/数据库名称&l;/td&g;\n&l;/tr&g;\n&l;tr&g;\n&l;td style=\&q;text-align:center\&q;&g;PgSQL&l;/td&g;\n&l;td style=\&q;text-align:center\&q;&g;DATABASE_URL&l;/td&g;\n&l;td style=\&q;text-align:center\&q;&g;postgres://用户名:密码@数据库主机:5432/数据库名称&l;/td&g;\n&l;/tr&g;\n&l;/tbody&g;\n&l;/table&g;&l;/div&g;&l;/div&g;&l;p&g;修改config.inc.php文件中数据库相关配置：&l;/p&g;\n&l;figure class=\&q;highlight php\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;3&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;4&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;5&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;6&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;7&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;8&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;9&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;10&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;11&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;12&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;13&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;14&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;15&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;16&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;17&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;18&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;19&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;20&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;21&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;22&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;23&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;24&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;25&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;26&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;comment\&q;&g;/** 定义MySQL数据库参数 */&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;comment\&q;&g;/**与下方PgSQL参数无法共存，请选择一项进行填写&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;comment\&q;&g;$db = new Typecho_Db(&a;#x27;Pdo_Mysql&a;#x27;, &a;#x27;typecho_&a;#x27;);&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;comment\&q;&g;$db-&a;gt;addServer(array (&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;comment\&q;&g;  &a;#x27;host&a;#x27; =&a;gt; &a;#x27;数据库地址&a;#x27;,&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;comment\&q;&g;  &a;#x27;user&a;#x27; =&a;gt; &a;#x27;数据库用户名&a;#x27;,&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;comment\&q;&g;  &a;#x27;password&a;#x27; =&a;gt; &a;#x27;数据库密码&a;#x27;,                                           &a;#x27;charset&a;#x27; =&a;gt; &a;#x27;utf8mb4&a;#x27;,&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;comment\&q;&g;  &a;#x27;port&a;#x27; =&a;gt; &a;#x27;3306&a;#x27;,&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;comment\&q;&g;  &a;#x27;database&a;#x27; =&a;gt; &a;#x27;数据库名称&a;#x27;,&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;comment\&q;&g;  &a;#x27;engine&a;#x27; =&a;gt; &a;#x27;MyISAM&a;#x27;,&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;comment\&q;&g;), Typecho_Db::READ | Typecho_Db::WRITE);&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;comment\&q;&g;Typecho_Db::set($db);        **/&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;comment\&q;&g;/** 定义PgSQL数据库参数 */&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;comment\&q;&g;/**与上方MySQL参数无法共存，请选择一项进行填写&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;comment\&q;&g;$db = new Typecho_Db(&a;#x27;Pdo_Pgsql&a;#x27;, &a;#x27;typecho_&a;#x27;);&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;comment\&q;&g;$db-&a;gt;addServer(array (&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;comment\&q;&g;  &a;#x27;host&a;#x27; =&a;gt; &a;#x27;数据库地址&a;#x27;,&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;comment\&q;&g;  &a;#x27;user&a;#x27; =&a;gt; &a;#x27;数据库用户名&a;#x27;,&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;comment\&q;&g;  &a;#x27;password&a;#x27; =&a;gt; &a;#x27;数据库密码&a;#x27;,&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;comment\&q;&g;  &a;#x27;charset&a;#x27; =&a;gt; &a;#x27;utf8&a;#x27;,&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;comment\&q;&g;  &a;#x27;port&a;#x27; =&a;gt; &a;#x27;5432&a;#x27;,&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;comment\&q;&g;  &a;#x27;database&a;#x27; =&a;gt; &a;#x27;数据库名称&a;#x27;,&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;comment\&q;&g;), Typecho_Db::READ | Typecho_Db::WRITE);&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;comment\&q;&g;Typecho_Db::set($db);        **/&l;/span&g;&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;删除其中一项的注释，并填写相关配置，然后更新git仓库：&l;/p&g;\n&l;figure class=\&q;highlight shell\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;2&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;git add .&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;git commit -m &a;#x27;update config&a;#x27;&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;h3 id=\&q;2.4-推送项目至heroku\&q;&g;2.4 推送项目至Heroku&l;a title=\&q;#2.4-推送项目至heroku\&q; href=\&q;#2.4-推送项目至heroku\&q;&g;&l;/a&g;&l;/h3&g;\n&l;p&g;接下来，使用如下命令将项目推送至Heroku&l;/p&g;\n&l;figure class=\&q;highlight shell\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;gutter\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;1&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;git push heroku master&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;然后打开：https://&l;code&g;APP_NAME&l;/code&g;.herokuapp.com/install.php&l;br&g;\n安装typecho&l;/p&g;\n&l;h2 id=\&q;3.绑定域名\&q;&g;3.绑定域名&l;a title=\&q;#3.绑定域名\&q; href=\&q;#3.绑定域名\&q;&g;&l;/a&g;&l;/h2&g;\n&l;p&g;这一步非必须，为可选步骤。&l;br&g;\n前往&l;a href=\&q;https://dashboard.heroku.com/apps\&q; target=\&q;_blank\&q;&g;Heroku管理面板&l;/a&g;，找到新建的应用，点击导航栏中的&l;strong&g;Settings&l;/strong&g;，下拉找到&l;strong&g;Domains&l;/strong&g;&l;br&g;\n点击&l;strong&g;Add domains&l;/strong&g;&l;br&g;\n&l;img src=\&q;/storage/emulated/0/ZR/static/imgs/typechoonheroku/addom.jpg\&q; alt=\&q;\&q;&g;&l;br&g;\n&l;img src=\&q;/storage/emulated/0/ZR/static/imgs/typechoonheroku/editdom.jpg\&q; alt=\&q;\&q;&g;&l;br&g;\n将域名解析至cname地址即可&l;/p&g;\n&l;p&g;Enjoy !&l;/p&g;\n&q;,&q;next&q;:{&q;title&q;:&q;解决 Heroku-cli 无法登陆&q;,&q;link&q;:&q;posts/herokuclilogin&q;},&q;plink&q;:&q;https://blog.zr.ci/posts/typechoonheroku/&q;,&q;toc&q;:[{&q;id&q;:&q;什么是-heroku？&q;,&q;title&q;:&q;什么是 Heroku？&q;,&q;index&q;:&q;1&q;},{&q;id&q;:&q;1.heroku基本配置&q;,&q;title&q;:&q;1.Heroku基本配置&q;,&q;index&q;:&q;2&q;,&q;children&q;:[{&q;id&q;:&q;1.1-安装heroku-cli&q;,&q;title&q;:&q;1.1 安装Heroku-cli&q;,&q;index&q;:&q;2.1&q;},{&q;id&q;:&q;1.2-配置heroku-cli&q;,&q;title&q;:&q;1.2 配置Heroku-cli&q;,&q;index&q;:&q;2.2&q;}]},{&q;id&q;:&q;2.部署typecho至heroku&q;,&q;title&q;:&q;2.部署Typecho至Heroku&q;,&q;index&q;:&q;3&q;,&q;children&q;:[{&q;id&q;:&q;2.1-新建-typecho-项目&q;,&q;title&q;:&q;2.1 新建 Typecho 项目&q;,&q;index&q;:&q;3.1&q;},{&q;id&q;:&q;2.2-新建-heroku-应用&q;,&q;title&q;:&q;2.2 新建 Heroku 应用&q;,&q;index&q;:&q;3.2&q;},{&q;id&q;:&q;2.3-设置应用语言&q;,&q;title&q;:&q;2.3 设置应用语言&q;,&q;index&q;:&q;3.3&q;},{&q;id&q;:&q;2.3-数据库配置&q;,&q;title&q;:&q;2.3 数据库配置&q;,&q;index&q;:&q;3.4&q;},{&q;id&q;:&q;2.4-推送项目至heroku&q;,&q;title&q;:&q;2.4 推送项目至Heroku&q;,&q;index&q;:&q;3.5&q;}]},{&q;id&q;:&q;3.绑定域名&q;,&q;title&q;:&q;3.绑定域名&q;,&q;index&q;:&q;4&q;}],&q;copyright&q;:{&q;author&q;:&q;箴扰&q;,&q;link&q;:&q;&l;a href=\&q;https://blog.zr.ci/posts/typechoonheroku/\&q; title=\&q;Heroku部署安装Typecho\&q;&g;https://blog.zr.ci/posts/typechoonheroku/&l;/a&g;&q;,&q;license&q;:&q;本博客所有文章除特别声明外，均采用(&l;a href=\&q;https://creativecommons.org/licenses/by-nc-sa/4.0/\&q; rel=\&q;nofollow\&q; target=\&q;_blank\&q;&g;CC BY-NC-SA 4.0&l;/a&g;)许可协议，转载请注明来源&l;a href=\&q;https://blog.zr.ci\&q; rel=\&q;nofollow\&q; target=\&q;_blank\&q;&g;箴扰&l;/a&g;！&q;}}}</script></head>
<body lang="zh-Hans">
<is-a class="φbm φk" ng-version="10.0.11"><is-l class="φeb φh"><div class="φel"><section class="φem"><header class="φec φf"><!----><is-c class="φed"><img draggable="false" class="φbw φw" src="https://www.gravatar.com/avatar/6a610305a94f20a4f2212eb510dc98b9?s=160" alt="" title="" width="160" height="160"></is-c><!----><a href="" class="φef φa φu">箴扰</a><p class="φee">分别便是为了重逢</p></header><div class="φeq φf"><a routerlink="/archives" class="φer φu" href="/archives"><span class="φd">14</span><span>归档</span></a><a class="φer φu" href="/categories/%E7%9E%8E%E6%8A%98%E8%85%BE"><span class="φd">2</span><span>分类</span></a><!----><a routerlink="/tags" class="φer φu" href="/tags"><span class="φd">15</span><span>标签</span></a><!----></div><!----><nav class="φen"><a class="φeo φbd φj φc φu φo" href="/">🏠　主页</a><!----><!----><!----><a class="φeo φbd φj φc φu φo" href="/links">🔗　邻居</a><!----><!----><!----><a class="φeo φbd φj φc φu φo" href="/about">📝　关于</a><!----><!----><!----><a class="φeo φbd φj φc φu φo" href="/search">🔍　搜索</a><!----><!----><!----><!----></nav><!----><div issnippet="" class="φbh"><is-palette2></is-palette2>
</div><!----><!----><!----></section><footer class="φeg φeh"><div class="φej"><a target="_blank" rel="external nofollow noopener" class="φek φbg φu icon-email" href="mailto:idkzrs@gmail.com">email</a><a target="_blank" rel="external nofollow noopener" class="φek φbg φu icon-feed" href="/atom.xml">feed</a><a target="_blank" rel="external nofollow noopener" class="φek φbg φu icon-github" href="https://github.com/idkzr">github</a><!----></div><!----><p class="φbk φz">© 2019-2020 ❤️ <a href="/">箴扰</a></p><!----><p class="φbk φz"><span class="φei">由 <a href="https://hexo.io" target="_blank" rel="external nofollow noopener">Hexo</a> 强力驱动</span><!----><span class="φei">主题 - <a href="https://github.com/ikeq/hexo-theme-inside" target="_blank" rel="external nofollow noopener">Inside</a></span><!----></p><!----><p class="φbk φz"><div><span title="总访客量"> UV : <span id="busuanzi_value_site_uv"></span></span> | <span title="总访问量"> PV : <span id="busuanzi_value_site_pv"></span></span></div></p><!----></footer></div></is-l><div class="φbo"><div class="φbn"><div class="φbs φbe"><main class="φbr φbf"><router-outlet></router-outlet><is-s class="φfx φf"><header class="φgh φgr" style="background-image:url(https://cdn.jsdelivr.net/gh/idkzr/static@master/imgs/typechoonheroku/cover.jpg);background-color:#111;"><div class="φgq"><!----><p class="φgj φr"><span class="φgk φgo">2020年11月26日</span><a class="φgk φgm φu" href="/categories/%E7%9E%8E%E6%8A%98%E8%85%BE">瞎折腾</a><!----><!----><!----></p><hr class="φgs"><!----><h1 class="φgt">Heroku部署安装Typecho</h1><!----></div></header><article itemscope="" itemtype="http://schema.org/Article" class="φga" data-title="Heroku部署安装Typecho"><div itemprop="articleBody" issnippet="" iszoomable="" class="φbk φh φz"><p>突然发现Heroku的玩法属实不少，便想着能不能在Heroku上部署安装Typecho，写篇文章记录一下。</p>
<a id="more"></a>
<h2 id="什么是-heroku？">什么是 Heroku？<a title="#什么是-heroku？" href="#什么是-heroku？"></a></h2>
<p>Heroku 是一个支持多种编程语言的 PaaS(Platform-as-a-Service)。在 2010 年被 Salesforce 收购。Heroku 作为最开始的云平台之一，从 2007 年 6 月起开始开发，当时它仅支持 Ruby，后来增加了对 Java、Node.js、Scala、Clojure、Python 以及 PHP 和 Perl 的支持。</p>
<h2 id="1.heroku基本配置">1.Heroku基本配置<a title="#1.heroku基本配置" href="#1.heroku基本配置"></a></h2>
<p>首先，我们需要一个 Heroku 账号，如果你还没有，请自行注册一个，并绑定一张信用卡&amp;借记卡，这里不做多讲。</p>
<h3 id="1.1-安装heroku-cli">1.1 安装Heroku-cli<a title="#1.1-安装heroku-cli" href="#1.1-安装heroku-cli"></a></h3>
<p>如果你的设备上已经安装了 Nodejs ，那么可以使用：<code>npm i heroku-cli -g</code>来安装<code>heroku-cli</code></p>
<p>否则请按照<a href="https://devcenter.heroku.com/articles/heroku-cli" target="_blank">官方文档</a>安装 <code>heroku-cli</code></p>
<p>安装完成后使用：<code>heroku version</code>来检查是否成功安装，如有类似以下输出则代表安装成功。</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> heroku version</span></span><br><span class="line">heroku-cli/7.0.9 android-arm64 node-v12.18.3</span><br></pre></td></tr></tbody></table></figure>
<h3 id="1.2-配置heroku-cli">1.2 配置Heroku-cli<a title="#1.2-配置heroku-cli" href="#1.2-配置heroku-cli"></a></h3>
<p>安装完成<code>heroku-cli</code>后，使用<code>heroku login -i</code>登陆Heroku，回显如下：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> heroku login -i</span></span><br><span class="line">heroku: Enter your login credentials</span><br><span class="line">Email: idkzrs@gmail.com</span><br><span class="line">Password: </span><br><span class="line">Two-factor code: </span><br><span class="line">Logged in as idkzrs@gmail.com</span><br></pre></td></tr></tbody></table></figure>
<p>如果以上命令无法登陆，请参考<a href="https://blog.zr.ci/posts/herokuclilogin" target="_blank">解决 Heroku-cli 无法登陆</a></p>
<p>然后添加 SSH 密钥:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ heroku keys:add</span><br></pre></td></tr></tbody></table></figure>
<h2 id="2.部署typecho至heroku">2.部署Typecho至Heroku<a title="#2.部署typecho至heroku" href="#2.部署typecho至heroku"></a></h2>
<p>heroku-cli配置完成后就可以开始准备部署了。</p>
<h3 id="2.1-新建-typecho-项目">2.1 新建 Typecho 项目<a title="#2.1-新建-typecho-项目" href="#2.1-新建-typecho-项目"></a></h3>
<p>拉取Typecho源码并修改：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/typecho/typecho.git</span><br><span class="line">cd typecho</span><br><span class="line">rm -rf .git* changelog.txt .editorconfig README.md</span><br><span class="line">git clone https://github.com/rvvcim/typecho-on-heroku.git</span><br><span class="line">mv toh/* toh/.htaccess .</span><br><span class="line">rm -rf toh</span><br></pre></td></tr></tbody></table></figure>
<p>初始化Git仓库：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br><span class="line">git add .</span><br><span class="line">git commit -m 'init heroku-te'</span><br></pre></td></tr></tbody></table></figure>
<h3 id="2.2-新建-heroku-应用">2.2 新建 Heroku 应用<a title="#2.2-新建-heroku-应用" href="#2.2-新建-heroku-应用"></a></h3>
<p>这步可以在web操作，也可以使用 heroku-cli 进行配置，这里我使用 cli 来进行操作。<br>
使用<code>heroku create</code>新建APP，创建成功将会输出类似如下内容:</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> heroku create</span></span><br><span class="line">Creating app... done, ⬢ xxxxxx-xxxx-12345</span><br><span class="line">https://xxxxxx-xxxx-12345.herokuapp.com/ | https://git.heroku.com/xxxxxx-xxxx-12345</span><br></pre></td></tr></tbody></table></figure>
<p>其中：<br>
<code>xxxxxx-xxxx-12345</code>为应用名称<br>
<code>https://xxxxxx-xxxx-12345.herokuapp.com/</code>为访问链接<br>
<code>https://git.heroku.com/xxxxxx-xxxx-12345</code>为git仓库</p>
<p>应用名称可以使用<code>heroku rename</code>进行修改，此操作将会同步修改访问链接和git仓库地址，如：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> heroku rename zr-te</span></span><br></pre></td></tr></tbody></table></figure>
<h3 id="2.3-设置应用语言">2.3 设置应用语言<a title="#2.3-设置应用语言" href="#2.3-设置应用语言"></a></h3>
<p>使用如下命令将应用语言设置为PHP：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">heroku buildpacks:set heroku/php</span><br></pre></td></tr></tbody></table></figure>
<p>若不设置语言可能导致上传时报错</p>
<h3 id="2.3-数据库配置">2.3 数据库配置<a title="#2.3-数据库配置" href="#2.3-数据库配置"></a></h3>
<p>Heroku提供了 MySQL 和 PgSQL 两种数据库，以插件形式添加，并各有一定免费额度，两种数据库二选一即可。<br>
添加MySQL插件：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">heroku addons:create jawsdb-maria:kitefin</span><br></pre></td></tr></tbody></table></figure>
<p>添加PgSQL插件：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">heroku addons:create heroku-postgresql:hobby-dev</span><br></pre></td></tr></tbody></table></figure>
<p>注：二选一即可，我这里使用MySQL举例。</p>
<p>添加完 MySQL/PgSQL后，前往<a href="https://dashboard.heroku.com/apps" target="_blank">Heroku管理面板</a>，找到刚才新建的应用，点击导航栏中的<strong>Settings</strong>，找到 <strong>Config Vars</strong> 项，点击<strong>Reveal Config Vars</strong><br>
<img src="/storage/emulated/0/ZR/static/imgs/typechoonheroku/configvars.jpg" alt=""><br>
将会显示MySQL/PgSQL连接信息，解析如下：</p>
<div class="φcy"><div class="φda"><table><thead>
<tr>
<th style="text-align:center">NAME</th>
<th style="text-align:center">KEY</th>
<th style="text-align:center">VALUE</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">MySQL</td>
<td style="text-align:center">JAWSDB_MARIA_URL</td>
<td style="text-align:center">mysql://用户名:密码@数据库主机:3306/数据库名称</td>
</tr>
<tr>
<td style="text-align:center">PgSQL</td>
<td style="text-align:center">DATABASE_URL</td>
<td style="text-align:center">postgres://用户名:密码@数据库主机:5432/数据库名称</td>
</tr>
</tbody>
</table></div></div><p>修改config.inc.php文件中数据库相关配置：</p>
<figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** 定义MySQL数据库参数 */</span></span><br><span class="line"><span class="comment">/**与下方PgSQL参数无法共存，请选择一项进行填写</span></span><br><span class="line"><span class="comment">$db = new Typecho_Db('Pdo_Mysql', 'typecho_');</span></span><br><span class="line"><span class="comment">$db-&gt;addServer(array (</span></span><br><span class="line"><span class="comment">  'host' =&gt; '数据库地址',</span></span><br><span class="line"><span class="comment">  'user' =&gt; '数据库用户名',</span></span><br><span class="line"><span class="comment">  'password' =&gt; '数据库密码',                                           'charset' =&gt; 'utf8mb4',</span></span><br><span class="line"><span class="comment">  'port' =&gt; '3306',</span></span><br><span class="line"><span class="comment">  'database' =&gt; '数据库名称',</span></span><br><span class="line"><span class="comment">  'engine' =&gt; 'MyISAM',</span></span><br><span class="line"><span class="comment">), Typecho_Db::READ | Typecho_Db::WRITE);</span></span><br><span class="line"><span class="comment">Typecho_Db::set($db);        **/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/** 定义PgSQL数据库参数 */</span></span><br><span class="line"><span class="comment">/**与上方MySQL参数无法共存，请选择一项进行填写</span></span><br><span class="line"><span class="comment">$db = new Typecho_Db('Pdo_Pgsql', 'typecho_');</span></span><br><span class="line"><span class="comment">$db-&gt;addServer(array (</span></span><br><span class="line"><span class="comment">  'host' =&gt; '数据库地址',</span></span><br><span class="line"><span class="comment">  'user' =&gt; '数据库用户名',</span></span><br><span class="line"><span class="comment">  'password' =&gt; '数据库密码',</span></span><br><span class="line"><span class="comment">  'charset' =&gt; 'utf8',</span></span><br><span class="line"><span class="comment">  'port' =&gt; '5432',</span></span><br><span class="line"><span class="comment">  'database' =&gt; '数据库名称',</span></span><br><span class="line"><span class="comment">), Typecho_Db::READ | Typecho_Db::WRITE);</span></span><br><span class="line"><span class="comment">Typecho_Db::set($db);        **/</span></span><br></pre></td></tr></tbody></table></figure>
<p>删除其中一项的注释，并填写相关配置，然后更新git仓库：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m 'update config'</span><br></pre></td></tr></tbody></table></figure>
<h3 id="2.4-推送项目至heroku">2.4 推送项目至Heroku<a title="#2.4-推送项目至heroku" href="#2.4-推送项目至heroku"></a></h3>
<p>接下来，使用如下命令将项目推送至Heroku</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push heroku master</span><br></pre></td></tr></tbody></table></figure>
<p>然后打开：https://<code>APP_NAME</code>.herokuapp.com/install.php<br>
安装typecho</p>
<h2 id="3.绑定域名">3.绑定域名<a title="#3.绑定域名" href="#3.绑定域名"></a></h2>
<p>这一步非必须，为可选步骤。<br>
前往<a href="https://dashboard.heroku.com/apps" target="_blank">Heroku管理面板</a>，找到新建的应用，点击导航栏中的<strong>Settings</strong>，下拉找到<strong>Domains</strong><br>
点击<strong>Add domains</strong><br>
<img src="/storage/emulated/0/ZR/static/imgs/typechoonheroku/addom.jpg" alt=""><br>
<img src="/storage/emulated/0/ZR/static/imgs/typechoonheroku/editdom.jpg" alt=""><br>
将域名解析至cname地址即可</p>
<p>Enjoy !</p>
</div><is-f class="φcc φv φs"><!----><ul class="φcg"><li class="φce"><strong class="φcf">本文作者<span>:</span></strong><p class="φcd">箴扰</p></li><li class="φce"><strong class="φcf">本文链接<span>:</span></strong><p class="φcd"><a href="https://blog.zr.ci/posts/typechoonheroku/" title="Heroku部署安装Typecho">https://blog.zr.ci/posts/typechoonheroku/</a></p></li><li class="φce"><strong class="φcf">版权声明<span>:</span></strong><p class="φcd">本博客所有文章除特别声明外，均采用(<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="nofollow" target="_blank">CC BY-NC-SA 4.0</a>)许可协议，转载请注明来源<a href="https://blog.zr.ci" rel="nofollow" target="_blank">箴扰</a>！</p></li><!----></ul><!----></is-f><!----><!----><!----></article><footer class="φgb φh"><div class="φgg"><is-m class="φet"><a class="φeu φs φq" href="/tags/Heroku,Typecho">Heroku,Typecho</a></is-m><!----></div><!----><div class="φgc"><!----><a class="φgd φge φu" href="/posts/herokuclilogin">解决 Heroku-cli 无法登陆</a><!----></div><!----></footer><is-e class="φbz φh"><div issnippet="" class="φbh"><div id="vcomment"></div>

</div><!----><!----><!----><!----></is-e><!----><!----><!----></is-s><!----></main><!----></div></div></div><is-g class="φch"><div class="φcq"><span class="φbg icon-up"></span><span class="φbg icon-down"></span><!----><span class="φbg icon-toc"></span><!----><span class="φbg icon-search"></span><!----></div><div class="φcj φck"><svg class="φcp"><defs><filter id="dp"><feGaussianBlur in="SourceGraphic" stdDeviation="2"></feGaussianBlur></filter></defs><circle filter="url(#dp)" fill="rgba(0,0,0,.3)" cx="50%" cy="52%" r="44%"></circle><circle cx="50%" cy="50%" r="44%" class="φcl φbb"></circle><circle cx="50%" cy="50%" r="48%" class="φco φba" stroke-dasharray="0% 314.15926%"></circle><!----><g class="φcm"><circle r=".2rem" cx="0" cy="-.8rem"></circle><circle r=".2rem"></circle><circle r=".2rem" cx="0" cy=".8rem"></circle></g><!----></svg></div></is-g><is-n class="φev φf"><div class="φex φey φn"><a class="φfa φu"><!----><span class="φfc">什么是 Heroku？</span></a><!----></div><div class="φex φey φn"><a class="φfa φu"><!----><span class="φfc">1.Heroku基本配置</span></a><div class="φex"><a class="φfa φu"><!----><span class="φfc">1.1 安装Heroku-cli</span></a><!----></div><div class="φex"><a class="φfa φu"><!----><span class="φfc">1.2 配置Heroku-cli</span></a><!----></div><!----><!----><!----></div><div class="φex φey φn"><a class="φfa φu"><!----><span class="φfc">2.部署Typecho至Heroku</span></a><div class="φex"><a class="φfa φu"><!----><span class="φfc">2.1 新建 Typecho 项目</span></a><!----></div><div class="φex"><a class="φfa φu"><!----><span class="φfc">2.2 新建 Heroku 应用</span></a><!----></div><div class="φex"><a class="φfa φu"><!----><span class="φfc">2.3 设置应用语言</span></a><!----></div><div class="φex"><a class="φfa φu"><!----><span class="φfc">2.3 数据库配置</span></a><!----></div><div class="φex"><a class="φfa φu"><!----><span class="φfc">2.4 推送项目至Heroku</span></a><!----></div><!----><!----><!----></div><div class="φex φey φn"><a class="φfa φu"><!----><span class="φfc">3.绑定域名</span></a><!----></div><!----></is-n><!----><!----></is-a>
<script src="//cdn.jsdelivr.net/gh/idkzr/static@master/inside/bsz.js"></script><script src="//cdn.jsdelivr.net/gh/idkzr/static@master/inside/themes.js"></script><script src="//cdn.jsdelivr.net/gh/idkzr/static@master/inside/theme.js"></script><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><script src="/runtime.b15aa7186c559b492b7d.js"></script><script src="/polyfills.824ff89b5f3ca4543a31.js"></script><script src="/main.03652fc423a687c817e8.js"></script>

</body></html>